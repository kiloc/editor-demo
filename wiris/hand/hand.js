(function(){var v6=v6||{},v7=function(){return js.Boot.__string_rec(this,'');};var EReg=v6["EReg"]=function(r,opt){opt=opt.split("u").join("");this.r=new RegExp(r,opt);};EReg.__name__=["EReg"];EReg.prototype={customReplace:function(s,f){var buf=new StringBuf();while(true){if(!this.match(s))break;buf.b+=Std.string(this.matchedLeft());buf.b+=Std.string(f(this));s=this.matchedRight();};buf.b+=Std.string(s);return buf.b;},replace:function(s,v8){return s.replace(this.r,v8);},split:function(s){var d="#__delim__#";return s.replace(this.r,d).split(d);},matchedPos:function(){if(this.r.m==null)throw"No string matched";return{pos:this.r.m.index,len:this.r.m[0].length};},matchedRight:function(){if(this.r.m==null)throw"No string matched";var v9=this.r.m.index+this.r.m[0].length;return this.r.s.substr(v9,this.r.s.length-v9);},matchedLeft:function(){if(this.r.m==null)throw"No string matched";return this.r.s.substr(0,this.r.m.index);},matched:function(n){return this.r.m!=null&&n>=0&&n<this.r.m.length?this.r.m[n]:(function(vA){var vB;throw"EReg::matched";return vB;}(this));},match:function(s){if(this.r.vC)this.r.vD=0;this.r.m=this.r.exec(s);this.r.s=s;return this.r.m!=null;},r:null,__class__:EReg};var HaxeHash=v6["HaxeHash"]=function(){this.h={};};HaxeHash.__name__=["HaxeHash"];HaxeHash.prototype={toString:function(){var s=new StringBuf();s.b+=Std.string("{");var vE=this.keys();while(vE.hasNext()){var i=vE.next();s.b+=Std.string(i);s.b+=Std.string(" => ");s.b+=Std.string(Std.string(this.get(i)));if(vE.hasNext())s.b+=Std.string(", ");};s.b+=Std.string("}");return s.b;},iterator:function(){return{ref:this.h,vE:this.keys(),hasNext:function(){return this.vE.hasNext();},next:function(){var i=this.vE.next();return this.ref["$"+i];}};},keys:function(){var a=[];for(var vF in this.h){if(this.h.hasOwnProperty(vF))a.push(vF.substr(1));};return HxOverrides.iter(a);},remove:function(vF){vF="$"+vF;if(!this.h.hasOwnProperty(vF))return false;delete(this.h[vF]);return true;},exists:function(vF){return this.h.hasOwnProperty("$"+vF);},get:function(vF){return this.h["$"+vF];},set:function(vF,value){this.h["$"+vF]=value;},h:null,__class__:HaxeHash};var HxOverrides=v6["HxOverrides"]=function(){};HxOverrides.__name__=["HxOverrides"];HxOverrides.vG=function(date){var m=date.getMonth()+1;var d=date.getDate();var h=date.getHours();var vH=date.getMinutes();var s=date.getSeconds();return date.getFullYear()+"-"+(m<10?"0"+m:""+m)+"-"+(d<10?"0"+d:""+d)+" "+(h<10?"0"+h:""+h)+":"+(vH<10?"0"+vH:""+vH)+":"+(s<10?"0"+s:""+s);};HxOverrides.vI=function(s){switch(s.length){case 8:var vJ=s.split(":");var d=new Date();d.vK(0);d.vL(vJ[0]);d.vM(vJ[1]);d.vN(vJ[2]);return d;case 10:var vJ=s.split("-");return new Date(vJ[0],vJ[1]-1,vJ[2],0,0,0);case 19:var vJ=s.split(" ");var vO=vJ[0].split("-");var t=vJ[1].split(":");return new Date(vO[0],vO[1]-1,vO[2],t[0],t[1],t[2]);default:throw"Invalid date format : "+s;}};HxOverrides.cca=function(s,index){var x=s.charCodeAt(index);if(x!=x)return undefined;return x;};HxOverrides.substr=function(s,pos,len){if(pos!=null&&pos!=0&&len!=null&&len<0)return"";if(len==null)len=s.length;if(pos<0){pos=s.length+pos;if(pos<0)pos=0;}else if(len<0)len=s.length+len-pos;return s.substr(pos,len);};HxOverrides.remove=function(a,obj){var i=0;var l=a.length;while(i<l){if(a[i]==obj){a.splice(i,1);return true;};i++;};return false;};HxOverrides.iter=function(a){return{cur:0,arr:a,hasNext:function(){return this.cur<this.arr.length;},next:function(){return this.arr[this.cur++];}};};var IntHash=v6["IntHash"]=function(){this.h={};};IntHash.__name__=["IntHash"];IntHash.prototype={toString:function(){var s=new StringBuf();s.b+=Std.string("{");var vE=this.keys();while(vE.hasNext()){var i=vE.next();s.b+=Std.string(i);s.b+=Std.string(" => ");s.b+=Std.string(Std.string(this.get(i)));if(vE.hasNext())s.b+=Std.string(", ");};s.b+=Std.string("}");return s.b;},iterator:function(){return{ref:this.h,vE:this.keys(),hasNext:function(){return this.vE.hasNext();},next:function(){var i=this.vE.next();return this.ref[i];}};},keys:function(){var a=[];for(var vF in this.h){if(this.h.hasOwnProperty(vF))a.push(vF|0);};return HxOverrides.iter(a);},remove:function(vF){if(!this.h.hasOwnProperty(vF))return false;delete(this.h[vF]);return true;},exists:function(vF){return this.h.hasOwnProperty(vF);},get:function(vF){return this.h[vF];},set:function(vF,value){this.h[vF]=value;},h:null,__class__:IntHash};var IntIter=v6["IntIter"]=function(min,max){this.min=min;this.max=max;};IntIter.__name__=["IntIter"];IntIter.prototype={next:function(){return this.min++;},hasNext:function(){return this.min<this.max;},max:null,min:null,__class__:IntIter};var List=v6["List"]=function(){this.length=0;};List.__name__=["List"];List.prototype={map:function(f){var b=new List();var l=this.h;while(l!=null){var v=l[0];l=l[1];b.add(f(v));};return b;},filter:function(f){var vP=new List();var l=this.h;while(l!=null){var v=l[0];l=l[1];if(f(v))vP.add(v);};return vP;},join:function(vQ){var s=new StringBuf();var first=true;var l=this.h;while(l!=null){if(first)first=false;else s.b+=Std.string(vQ);s.b+=Std.string(l[0]);l=l[1];};return s.b;},toString:function(){var s=new StringBuf();var first=true;var l=this.h;s.b+=Std.string("{");while(l!=null){if(first)first=false;else s.b+=Std.string(", ");s.b+=Std.string(Std.string(l[0]));l=l[1];};s.b+=Std.string("}");return s.b;},iterator:function(){return{h:this.h,hasNext:function(){return this.h!=null;},next:function(){if(this.h==null)return null;var x=this.h[0];this.h=this.h[1];return x;}};},remove:function(v){var vR=null;var l=this.h;while(l!=null){if(l[0]==v){if(vR==null)this.h=l[1];else vR[1]=l[1];if(this.q==l)this.q=vR;this.length--;return true;};vR=l;l=l[1];};return false;},clear:function(){this.h=null;this.q=null;this.length=0;},isEmpty:function(){return this.h==null;},pop:function(){if(this.h==null)return null;var x=this.h[0];this.h=this.h[1];if(this.h==null)this.q=null;this.length--;return x;},last:function(){return this.q==null?null:this.q[0];},first:function(){return this.h==null?null:this.h[0];},push:function(vS){var x=[vS,this.h];this.h=x;if(this.q==null)this.q=x;this.length++;},add:function(vS){var x=[vS];if(this.h==null)this.h=x;else this.q[1]=x;this.q=x;this.length++;},length:null,q:null,h:null,__class__:List};var Reflect=v6["Reflect"]=function(){};Reflect.__name__=["Reflect"];Reflect.hasField=function(o,field){return Object.prototype.hasOwnProperty.call(o,field);};Reflect.field=function(o,field){var v=null;try{v=o[field];}catch(e){};return v;};Reflect.setField=function(o,field,value){o[field]=value;};Reflect.vT=function(o,field){var vU;return o==null?null:o.__properties__&&(vU=o.__properties__["get_"+field])?o[vU]():o[field];};Reflect.vV=function(o,field,value){var vU;if(o.__properties__&&(vU=o.__properties__["set_"+field]))o[vU](value);else o[field]=value;};Reflect.callMethod=function(o,vW,args){return vW.apply(o,args);};Reflect.fields=function(o){var a=[];if(o!=null){var hasOwnProperty=Object.prototype.hasOwnProperty;for(var f in o){if(hasOwnProperty.call(o,f))a.push(f);}};return a;};Reflect.isFunction=function(f){return typeof(f)=="function"&&!(f.__name__||f.vX);};Reflect.compare=function(a,b){return a==b?0:a>b?1:-1;};Reflect.compareMethods=function(vY,vZ){if(vY==vZ)return true;if(!Reflect.isFunction(vY)||!Reflect.isFunction(vZ))return false;return vY.scope==vZ.scope&&vY.method==vZ.method&&vY.method!=null;};Reflect.isObject=function(v){if(v==null)return false;var t=typeof(v);return t=="string"||t=="object"&&!v.va||t=="function"&&(v.__name__||v.vX);};Reflect.deleteField=function(o,f){if(!Reflect.hasField(o,f))return false;delete(o[f]);return true;};Reflect.copy=function(o){var vb={};var vc=0,vd=Reflect.fields(o);while(vc<vd.length){var f=vd[vc];++vc;vb[f]=Reflect.field(o,f);};return vb;};Reflect.makeVarArgs=function(f){return function(){var a=Array.prototype.slice.call(arguments);return f(a);};};var Std=v6["Std"]=function(){};Std.__name__=["Std"];Std["is"]=function(v,t){return js.Boot.__instanceof(v,t);};Std.string=function(s){return js.Boot.__string_rec(s,"");};Std["int"]=function(x){return x|0;};Std.parseInt=function(x){var v=parseInt(x,10);if(v==0&&(HxOverrides.cca(x,1)==120||HxOverrides.cca(x,1)==88))v=parseInt(x);if(isNaN(v))return null;return v;};Std.parseFloat=function(x){return parseFloat(x);};Std.random=function(x){return Math.floor(Math.random()*x);};var StringBuf=v6["StringBuf"]=function(){this.b="";};StringBuf.__name__=["StringBuf"];StringBuf.prototype={toString:function(){return this.b;},addSub:function(s,pos,len){this.b+=HxOverrides.substr(s,pos,len);},addChar:function(c){this.b+=String.fromCharCode(c);},add:function(x){this.b+=Std.string(x);},b:null,__class__:StringBuf};var StringTools=v6["StringTools"]=function(){};StringTools.__name__=["StringTools"];StringTools.urlEncode=function(s){return encodeURIComponent(s);};StringTools.urlDecode=function(s){return decodeURIComponent(s.split("+").join(" "));};StringTools.htmlEscape=function(s){return s.split("&").join("&amp;").split("<").join("&lt;").split(">").join("&gt;");};StringTools.htmlUnescape=function(s){return s.split("&gt;").join(">").split("&lt;").join("<").split("&amp;").join("&");};StringTools.startsWith=function(s,start){return s.length>=start.length&&HxOverrides.substr(s,0,start.length)==start;};StringTools.endsWith=function(s,end){var ve=end.length;var vf=s.length;return vf>=ve&&HxOverrides.substr(s,vf-ve,ve)==end;};StringTools.isSpace=function(s,pos){var c=HxOverrides.cca(s,pos);return c>=9&&c<=13||c==32;};StringTools.ltrim=function(s){var l=s.length;var r=0;while(r<l&&StringTools.isSpace(s,r))r++;if(r>0)return HxOverrides.substr(s,r,l-r);else return s;};StringTools.rtrim=function(s){var l=s.length;var r=0;while(r<l&&StringTools.isSpace(s,l-r-1))r++;if(r>0)return HxOverrides.substr(s,0,l-r);else return s;};StringTools.trim=function(s){return StringTools.ltrim(StringTools.rtrim(s));};StringTools.rpad=function(s,c,l){var vg=s.length;var vh=c.length;while(vg<l)if(l-vg<vh){s+=HxOverrides.substr(c,0,l-vg);vg=l;}else{s+=c;vg+=vh;};return s;};StringTools.lpad=function(s,c,l){var vi="";var vg=s.length;if(vg>=l)return s;var vh=c.length;while(vg<l)if(l-vg<vh){vi+=HxOverrides.substr(c,0,l-vg);vg=l;}else{vi+=c;vg+=vh;};return vi+s;};StringTools.replace=function(s,sub,v8){return s.split(sub).join(v8);};StringTools.hex=function(n,vj){var s="";var vk="0123456789ABCDEF";do{s=vk.charAt(n&15)+s;n>>>=4;}while(n>0);if(vj!=null)while(s.length<vj)s="0"+s;return s;};StringTools.vl=function(s,index){return s.charCodeAt(index);};StringTools.vm=function(c){return c!=c;};var ValueType=v6["ValueType"]={vX:["ValueType"],vn:["TNull","TInt","TFloat","TBool","TObject","TFunction","TClass","TEnum","TUnknown"]};ValueType.TNull=["TNull",0];ValueType.TNull.toString=v7;ValueType.TNull.va=ValueType;ValueType.TInt=["TInt",1];ValueType.TInt.toString=v7;ValueType.TInt.va=ValueType;ValueType.TFloat=["TFloat",2];ValueType.TFloat.toString=v7;ValueType.TFloat.va=ValueType;ValueType.TBool=["TBool",3];ValueType.TBool.toString=v7;ValueType.TBool.va=ValueType;ValueType.TObject=["TObject",4];ValueType.TObject.toString=v7;ValueType.TObject.va=ValueType;ValueType.TFunction=["TFunction",5];ValueType.TFunction.toString=v7;ValueType.TFunction.va=ValueType;ValueType.TClass=function(c){var vo=["TClass",6,c];vo.va=ValueType;vo.toString=v7;return vo;};ValueType.TEnum=function(e){var vo=["TEnum",7,e];vo.va=ValueType;vo.toString=v7;return vo;};ValueType.TUnknown=["TUnknown",8];ValueType.TUnknown.toString=v7;ValueType.TUnknown.va=ValueType;var Type=v6["Type"]=function(){};Type.__name__=["Type"];Type.getClass=function(o){if(o==null)return null;return o.__class__;};Type.getEnum=function(o){if(o==null)return null;return o.va;};Type.getSuperClass=function(c){return c.__super__;};Type.getClassName=function(c){var a=c.__name__;return a.join(".");};Type.getEnumName=function(e){var a=e.vX;return a.join(".");};Type.resolveClass=function(name){var vh=v6[name];if(vh==null||!vh.__name__)return null;return vh;};Type.resolveEnum=function(name){var e=v6[name];if(e==null||!e.vX)return null;return e;};Type.createInstance=function(vh,args){switch(args.length){case 0:return new vh();case 1:return new vh(args[0]);case 2:return new vh(args[0],args[1]);case 3:return new vh(args[0],args[1],args[2]);case 4:return new vh(args[0],args[1],args[2],args[3]);case 5:return new vh(args[0],args[1],args[2],args[3],args[4]);case 6:return new vh(args[0],args[1],args[2],args[3],args[4],args[5]);case 7:return new vh(args[0],args[1],args[2],args[3],args[4],args[5],args[6]);case 8:return new vh(args[0],args[1],args[2],args[3],args[4],args[5],args[6],args[7]);default:throw"Too many arguments";};return null;};Type.createEmptyInstance=function(vh){function empty(){};empty.prototype=vh.prototype;return new empty();};Type.createEnum=function(e,vp,params){var f=Reflect.field(e,vp);if(f==null)throw"No such constructor "+vp;if(Reflect.isFunction(f)){if(params==null)throw"Constructor "+vp+" need parameters";return f.apply(e,params);};if(params!=null&&params.length!=0)throw"Constructor "+vp+" does not need parameters";return f;};Type.createEnumIndex=function(e,index,params){var c=e.vn[index];if(c==null)throw index+" is not a valid enum constructor index";return Type.createEnum(e,c,params);};Type.getInstanceFields=function(c){var a=[];for(var i in c.prototype)a.push(i);HxOverrides.remove(a,"__class__");HxOverrides.remove(a,"__properties__");return a;};Type.getClassFields=function(c){var a=Reflect.fields(c);HxOverrides.remove(a,"__name__");HxOverrides.remove(a,"__interfaces__");HxOverrides.remove(a,"__properties__");HxOverrides.remove(a,"__super__");HxOverrides.remove(a,"prototype");return a;};Type.getEnumConstructs=function(e){var a=e.vn;return a.slice();};Type["typeof"]=function(v){switch(typeof(v)){case"boolean":return ValueType.TBool;case"string":return ValueType.TClass(String);case"number":if(Math.ceil(v)==v%2147483648.0)return ValueType.TInt;return ValueType.TFloat;case"object":if(v==null)return ValueType.TNull;var e=v.va;if(e!=null)return ValueType.TEnum(e);var c=v.__class__;if(c!=null)return ValueType.TClass(c);return ValueType.TObject;case"function":if(v.__name__||v.vX)return ValueType.TObject;return ValueType.TFunction;case"undefined":return ValueType.TNull;default:return ValueType.TUnknown;}};Type.enumEq=function(a,b){if(a==b)return true;try{if(a[0]!=b[0])return false;var vd=2,vc=a.length;while(vd<vc){var i=vd++;if(!Type.enumEq(a[i],b[i]))return false;};var e=a.va;if(e!=b.va||e==null)return false;}catch(e){return false;};return true;};Type.enumConstructor=function(e){return e[0];};Type.enumParameters=function(e){return e.slice(2);};Type.enumIndex=function(e){return e[1];};Type.vq=function(e){var all=[];var vr=e.vn;var vc=0;while(vc<vr.length){var c=vr[vc];++vc;var v=Reflect.field(e,c);if(!Reflect.isFunction(v))all.push(v);};return all;};var Xml=v6["Xml"]=function(){};Xml.__name__=["Xml"];Xml.Element=null;Xml.PCData=null;Xml.CData=null;Xml.Comment=null;Xml.DocType=null;Xml.Prolog=null;Xml.Document=null;Xml.parse=function(str){return haxe.xml.Parser.parse(str);};Xml.createElement=function(name){var r=new Xml();r.nodeType=Xml.Element;r._children=new Array();r._attributes=new HaxeHash();r.setNodeName(name);return r;};Xml.createPCData=function(data){var r=new Xml();r.nodeType=Xml.PCData;r.setNodeValue(data);return r;};Xml.createCData=function(data){var r=new Xml();r.nodeType=Xml.CData;r.setNodeValue(data);return r;};Xml.createComment=function(data){var r=new Xml();r.nodeType=Xml.Comment;r.setNodeValue(data);return r;};Xml.createDocType=function(data){var r=new Xml();r.nodeType=Xml.DocType;r.setNodeValue(data);return r;};Xml.createProlog=function(data){var r=new Xml();r.nodeType=Xml.Prolog;r.setNodeValue(data);return r;};Xml.createDocument=function(){var r=new Xml();r.nodeType=Xml.Document;r._children=new Array();return r;};Xml.prototype={toString:function(){if(this.nodeType==Xml.PCData)return this._nodeValue;if(this.nodeType==Xml.CData)return"<![CDATA["+this._nodeValue+"]]>";if(this.nodeType==Xml.Comment)return"<!--"+this._nodeValue+"-->";if(this.nodeType==Xml.DocType)return"<!DOCTYPE "+this._nodeValue+">";if(this.nodeType==Xml.Prolog)return"<?"+this._nodeValue+"?>";var s=new StringBuf();if(this.nodeType==Xml.Element){s.b+=Std.string("<");s.b+=Std.string(this._nodeName);var vs=this._attributes.keys();while(vs.hasNext()){var vJ=vs.next();s.b+=Std.string(" ");s.b+=Std.string(vJ);s.b+=Std.string("=\"");s.b+=Std.string(this._attributes.get(vJ));s.b+=Std.string("\"");};if(this._children.length==0){s.b+=Std.string("/>");return s.b;};s.b+=Std.string(">");};var vt=this.iterator();while(vt.hasNext()){var x=vt.next();s.b+=Std.string(x.toString());};if(this.nodeType==Xml.Element){s.b+=Std.string("</");s.b+=Std.string(this._nodeName);s.b+=Std.string(">");};return s.b;},insertChild:function(x,pos){if(this._children==null)throw"bad nodetype";if(x._parent!=null)HxOverrides.remove(x._parent._children,x);x._parent=this;this._children.splice(pos,0,x);},removeChild:function(x){if(this._children==null)throw"bad nodetype";var b=HxOverrides.remove(this._children,x);if(b)x._parent=null;return b;},addChild:function(x){if(this._children==null)throw"bad nodetype";if(x._parent!=null)HxOverrides.remove(x._parent._children,x);x._parent=this;this._children.push(x);},firstElement:function(){if(this._children==null)throw"bad nodetype";var cur=0;var l=this._children.length;while(cur<l){var n=this._children[cur];if(n.nodeType==Xml.Element)return n;cur++;};return null;},firstChild:function(){if(this._children==null)throw"bad nodetype";return this._children[0];},elementsNamed:function(name){if(this._children==null)throw"bad nodetype";return{cur:0,x:this._children,hasNext:function(){var vJ=this.cur;var l=this.x.length;while(vJ<l){var n=this.x[vJ];if(n.nodeType==Xml.Element&&n._nodeName==name)break;vJ++;};this.cur=vJ;return vJ<l;},next:function(){var vJ=this.cur;var l=this.x.length;while(vJ<l){var n=this.x[vJ];vJ++;if(n.nodeType==Xml.Element&&n._nodeName==name){this.cur=vJ;return n;}};return null;}};},elements:function(){if(this._children==null)throw"bad nodetype";return{cur:0,x:this._children,hasNext:function(){var vJ=this.cur;var l=this.x.length;while(vJ<l){if(this.x[vJ].nodeType==Xml.Element)break;vJ+=1;};this.cur=vJ;return vJ<l;},next:function(){var vJ=this.cur;var l=this.x.length;while(vJ<l){var n=this.x[vJ];vJ+=1;if(n.nodeType==Xml.Element){this.cur=vJ;return n;}};return null;}};},iterator:function(){if(this._children==null)throw"bad nodetype";return{cur:0,x:this._children,hasNext:function(){return this.cur<this.x.length;},next:function(){return this.x[this.cur++];}};},attributes:function(){if(this.nodeType!=Xml.Element)throw"bad nodeType";return this._attributes.keys();},exists:function(att){if(this.nodeType!=Xml.Element)throw"bad nodeType";return this._attributes.exists(att);},remove:function(att){if(this.nodeType!=Xml.Element)throw"bad nodeType";this._attributes.remove(att);},set:function(att,value){if(this.nodeType!=Xml.Element)throw"bad nodeType";this._attributes.set(att,value);},get:function(att){if(this.nodeType!=Xml.Element)throw"bad nodeType";return this._attributes.get(att);},getParent:function(){return this._parent;},setNodeValue:function(v){if(this.nodeType==Xml.Element||this.nodeType==Xml.Document)throw"bad nodeType";return this._nodeValue=v;},getNodeValue:function(){if(this.nodeType==Xml.Element||this.nodeType==Xml.Document)throw"bad nodeType";return this._nodeValue;},setNodeName:function(n){if(this.nodeType!=Xml.Element)throw"bad nodeType";return this._nodeName=n;},getNodeName:function(){if(this.nodeType!=Xml.Element)throw"bad nodeType";return this._nodeName;},_parent:null,_children:null,_attributes:null,_nodeValue:null,_nodeName:null,parent:null,nodeValue:null,nodeName:null,nodeType:null,__class__:Xml,__properties__:{vu:"setNodeName",vv:"getNodeName",vw:"setNodeValue",vx:"getNodeValue",vy:"getParent"}};var com=com||{};if(!com.wiris)com.wiris={};if(!com.wiris.js)com.wiris.js={};com.wiris.js.HandInterface=v6["com.wiris.js.HandInterface"]=function(){};com.wiris.js.HandInterface.__name__=["com","wiris","js","HandInterface"];com.wiris.js.HandInterface.prototype={setParams:null,setStrokes:null,getStrokes:null,setMathML:null,getScore:null,getMathMLWithStrokes:null,getMathML:null,addHandListener:null,insertInto:null,__class__:com.wiris.js.HandInterface};com.wiris.js.HandListener=v6["com.wiris.js.HandListener"]=function(){};com.wiris.js.HandListener.__name__=["com","wiris","js","HandListener"];com.wiris.js.HandListener.prototype={strokesChanged:null,recognitionError:null,contentChanged:null,__class__:com.wiris.js.HandListener};if(!com.wiris.system)com.wiris.system={};com.wiris.e1_1=v6["com.wiris.e1_1"]=function(){};com.wiris.e1_1.__name__=["com","wiris","e1_1"];com.wiris.e1_1.prototype={urlAnswerReceived:null,serviceAnswerReceived:null,__class__:com.wiris.e1_1};com.wiris.js.JsHand=v6["com.wiris.js.JsHand"]=function(params){com.wiris.system.ServiceProvider.vz(com.wiris.system.ServiceProvider.v01);com.wiris.system.ServiceProvider.v11("mathtype-web-hand-java");var v21=this.findPaths();if(v21==null)js.Lib.alert("Missing MathType SDK Hand service! (cannot find hand.js).");else{this.resourceLoader=com.wiris.system.ResourceLoader.newInstance(v21[0]+"/resources");com.wiris.system.ServiceProvider.v31(v21[1]);};this.element=null;this.readOnly=false;this.toolbarHidden=false;this.lineColor=com.wiris.js.JsHand.DEFAULT_LINE_COLOR;this.lineWidth=com.wiris.js.JsHand.DEFAULT_LINE_WIDTH;this.previewZoom=com.wiris.js.JsHand.DEFAULT_PREVIEW_ZOOM;this.recognitionDelay=com.wiris.js.JsHand.DEFAULT_RECOGNITION_DELAY;this.symbolList="";this.structureList="";this.grammar="";this.recognitionType="math";this.handListeners=new Array();this.testSuccessCallbacks=new Array();this.testErrorCallbacks=new Array();this.tickContainer=null;this.strokes=this.newStrokeBuffer();this.resetUndoBuffer();this.recognitionTimer=null;this.recognitionResult=null;this.recognitionScore=0.0;this.errorMessage=null;this.strokesResult=this.getStrokes();this.strokesSent=this.strokesResult;this.requestId=null;this.status=null;this.sessionId=this.generateId(10);this.painting=false;this.playing=false;this.deletionGestureEnabled=true;this.strokesZoom=1;this.strokesDX=0;this.strokesDY=0;this.editionMode=false;this.helpStoredStrokes=null;this.setParams(params);this.instanceIndex=com.wiris.js.JsHand.instances.length;com.wiris.js.JsHand.instances.push([null,this]);};com.wiris.js.JsHand.__name__=["com","wiris","js","JsHand"];com.wiris.js.JsHand.__interfaces__=[com.wiris.e1_1,com.wiris.js.HandInterface];com.wiris.js.JsHand.newInstance=function(params){return new com.wiris.js.JsHand(params);};com.wiris.js.JsHand.getInstance=function(parent){var i=HxOverrides.iter(com.wiris.js.JsHand.instances);while(i.hasNext()){var v41=i.next();if(v41[0]==parent)return v41[1];};return null;};com.wiris.js.JsHand.bypassEncapsulation=function(){if(window.com==null)window.com={};if(window.com.wiris==null)window.com.wiris={};if(window.com.wiris.js==null)window.com.wiris.js={};window.com.wiris.js.JsHand=com.wiris.js.JsHand;};com.wiris.js.JsHand.prototype={showTickContainer:function(text){if(this.tickContainer!=null)this.element.removeChild(this.tickContainer);this.tickContainer=js.Lib.document.createElement("div");this.tickContainer.className="wrs_tickContainer";this.tickContainer.innerHTML=text;var v51=this.tickContainer.getElementsByTagName("a");var vd=0,vc=v51.length;while(vd<vc){var i=vd++;v51[i].setAttribute("tabindex","-1");};this.element.appendChild(this.tickContainer);},onPublicServicesResult:function(requestId,status,result,warnings,errors){if(requestId!=this.requestId)return;this.strokesResult=this.strokesSent;this.status=status;if(status=="error"){this.errorMessage=errors[0];this.renderPreviewImage();this.fireRecognitionError(errors[0]);this.recognitionResult=null;this.recognitionScore=0.0;}else{this.recognitionResult=result.mathml;this.recognitionScore=result.score;this.renderPreviewImage();};this.fireContentChanged();viewer.run();},hideHelp:function(){if(com.wiris.system.JsDOMUtils.v61(this.element,"wrs_withHelp")){com.wiris.system.JsDOMUtils.v71(this.helpButton,"wrs_pressed");com.wiris.system.JsDOMUtils.v71(this.element,"wrs_withHelp");this.snackbar.hide();if(this.helpTimeout!=null){clearTimeout(this.helpTimeout);this.helpTimeout=null;};this.clear();this.recognize();if(this.helpStoredStrokes!=null){this.setStrokes(this.helpStoredStrokes);this.fitStrokes(true);this.helpStoredStrokes=null;};if(this.helpStoredUndoBuffer!=null){this.undoBuffer=this.helpStoredUndoBuffer;this.undoPosition=this.helpStoredUndoPosition;this.manageUndoRedoButtons();};this.playing=false;}},showHelp:function(){this.hideHelp();this.helpStoredStrokes=this.getStrokes();this.helpStoredUndoBuffer=this.undoBuffer;this.helpStoredUndoPosition=this.undoPosition;this.resetUndoBuffer();this.clear();this.hidePreviewImage();this.resetUndoBuffer();this.manageUndoRedoButtons();com.wiris.system.JsDOMUtils.v81(this.helpButton,"wrs_pressed");com.wiris.system.JsDOMUtils.v81(this.element,"wrs_withHelp");var v91;if(this.recognitionType=="text")v91="To delete parts of the text, scribble them out";else v91="To delete parts of the formula, scribble them out";this.snackbar.show(v91,null,null);var self=this;this.helpTimeout=setTimeout(function(){var strokes=self.recognitionType=="text"?com.wiris.js.JsHand.HELP_STROKES_TEXT:com.wiris.js.JsHand.HELP_STROKES_MATH;self.playStrokes(strokes,com.wiris.js.JsHand.HELP_POINTS_DELAY,com.wiris.js.JsHand.HELP_STROKES_DELAY,function(){self.fireRepaintAndRecognize();self.helpTimeout=setTimeout(vA1(self,self.hideHelp),4000);});},2000);},onDocumentMouseDown:function(e){this.hideHelp();},onDocumentKeyPress:function(e){this.hideHelp();if(e.charCode==114)this.removeEditionPoint();else if(e.charCode==97)this.insertAfterPoint();else if(e.charCode==98)this.insertBeforePoint();else if(e.charCode==99)this.createEditionStroke();else if(e.charCode==102)this.finishEditionStroke();},finishEditionStroke:function(){if(this.creatingEditionStroke){this.creatingEditionStroke=false;this.editionStroke=null;this.editionPoint=null;com.wiris.system.JsDOMUtils.v71(this.createEditionStrokeButton,"wrs_pressed");}},createEditionStroke:function(){if(!this.creatingEditionStroke){this.creatingEditionStroke=true;this.editionStroke=null;this.editionPoint=null;com.wiris.system.JsDOMUtils.v81(this.createEditionStrokeButton,"wrs_pressed");}},getPointPosition:function(){var i=this.editionStroke.length-1;while(i>=0){if(this.editionStroke[i]==this.editionPoint)return i;--i;};return-1;},insertAfterPoint:function(){if(this.editionPoint!=null){var position=this.getPointPosition();this.editionStroke.splice(position+1,0,[this.editionPoint[0]+com.wiris.js.JsHand.DEFAULT_EDITION_MARKER_SIZE,this.editionPoint[1]+com.wiris.js.JsHand.DEFAULT_EDITION_MARKER_SIZE]);this.fireRepaintAndRecognize();}},insertBeforePoint:function(){if(this.editionPoint!=null){var position=this.getPointPosition();this.editionStroke.splice(position,0,[this.editionPoint[0]-com.wiris.js.JsHand.DEFAULT_EDITION_MARKER_SIZE,this.editionPoint[1]-com.wiris.js.JsHand.DEFAULT_EDITION_MARKER_SIZE]);this.fireRepaintAndRecognize();}},removeEditionPoint:function(){if(this.editionPoint!=null){HxOverrides.remove(this.editionStroke,this.editionPoint);this.editionPoint=null;this.editionStroke=null;this.movingPoint=false;this.fireRepaintAndRecognize();}},polyLineToPolygon:function(vB1,vC1,vD1,vE1,vF1){var m=com.wiris.js.JsHand.DEFAULT_DELETION_SAFE_MARGIN/this.strokesZoom;if(2*m<vE1-vC1&&2*m<vF1-vD1){vC1+=m;vD1+=m;vE1-=m;vF1-=m;};var i=0;var a=-1;while(i<vB1.length&&a==-1){if(vB1[i][0]>=vC1&&vB1[i][0]<=vE1&&vB1[i][1]>=vD1&&vB1[i][1]<=vF1)a=i;++i;};var vG1=new Array();i=a+1;var vH1=0;while(i<vB1.length){if(vB1[i][0]>=vC1&&vB1[i][0]<=vE1&&vB1[i][1]>=vD1&&vB1[i][1]<=vF1){var vI1=this.segmentToRectangle(vB1[a],vB1[i]);if(vI1!=null){vG1.splice(vH1++,0,vI1[0]);vG1.splice(vH1++,0,vI1[1]);vG1.splice(vH1,0,vI1[3]);vG1.splice(vH1,0,vI1[2]);};a=i;};++i;};if(vG1.length==0)return null;return vG1;},segmentToRectangle:function(a,b){var vJ1=b[0]-a[0];var vK1=b[1]-a[1];var vL1=Math.sqrt(vJ1*vJ1+vK1*vK1);if(vL1==0)return null;var vM1=vJ1/vL1;var vN1=vK1/vL1;var vO1=com.wiris.js.JsHand.DEFAULT_DELETION_RECTANGLE_WIDTH/this.strokesZoom;var vI1=new Array();vI1.push([a[0]-vN1*vO1/2.0,a[1]+vM1*vO1/2.0]);vI1.push([vI1[0][0]+vJ1,vI1[0][1]+vK1]);vI1.push([vI1[1][0]+vN1*vO1,vI1[1][1]-vM1*vO1]);vI1.push([vI1[2][0]-vJ1,vI1[2][1]-vK1]);return vI1;},segmentsIntersect:function(vP1,vQ1,vR1,vS1){return this.pointSegmentPosition(vP1,vQ1,vR1)*this.pointSegmentPosition(vP1,vQ1,vS1)<0&&this.pointSegmentPosition(vR1,vS1,vP1)*this.pointSegmentPosition(vR1,vS1,vQ1)<0;},pointInsidePolygon:function(p,vG1){var vT1=0;var i=0;while(i<vG1.length){var vU1=(i+1)%vG1.length;if(vG1[i][1]<=p[1]){if(vG1[vU1][1]>p[1]){if(this.pointSegmentPosition(vG1[i],vG1[vU1],p)>0)++vT1;}}else if(vG1[vU1][1]<=p[1]){if(this.pointSegmentPosition(vG1[i],vG1[vU1],p)<0)--vT1;};++i;};return vT1!=0;},pointSegmentPosition:function(vV1,vW1,p){return(vW1[0]-vV1[0])*(p[1]-vV1[1])-(vW1[1]-vV1[1])*(p[0]-vV1[0]);},newStrokeBuffer:function(vX1){var r=new Array();if(vX1!=null){var i=HxOverrides.iter(vX1);while(i.hasNext())r.push(i.next());};return r;},fireStrokesChanged:function(){this.requestId=null;this.manageUndoRedoButtons();this.fitStrokes();var vc=0,vd=this.handListeners;while(vc<vd.length){var listener=vd[vc];++vc;if('strokesChanged'in listener)listener.strokesChanged(this);}},fireRepaintAndRecognize:function(){this.fireStrokesChanged();this.repaint();this.recognizeWithDelay();},fireRecognitionError:function(vY1){var vc=0,vd=this.handListeners;while(vc<vd.length){var listener=vd[vc];++vc;if('recognitionError'in listener)listener.recognitionError(this,vY1);}},fireContentChanged:function(){var vc=0,vd=this.handListeners;while(vc<vd.length){var listener=vd[vc];++vc;if('contentChanged'in listener)listener.contentChanged(this);}},setToolbarHidden:function(hidden){this.toolbarHidden=hidden;if(this.element==null)return;if(hidden)com.wiris.system.JsDOMUtils.vZ1(this.element,"wrs_toolbarHidden");else com.wiris.system.JsDOMUtils.v71(this.element,"wrs_toolbarHidden");},setReadOnly:function(readOnly){this.readOnly=readOnly;if(this.element==null)return;if(readOnly)com.wiris.system.JsDOMUtils.vZ1(this.element,"wrs_readOnly");else com.wiris.system.JsDOMUtils.v71(this.element,"wrs_readOnly");},setConstraints:function(param){if(js.Boot.__instanceof(param,String))param=haxe.Json.parse(param);this.symbolList=haxe.Json.stringify(Reflect.field(param,"symbols"));this.structureList=haxe.Json.stringify(Reflect.field(param,"structure"));this.grammar=Reflect.field(param,"grammar");if(this.symbolList==null||this.symbolList=="['']")this.symbolList="";if(this.structureList==null||this.structureList=="['']")this.structureList="";if(this.grammar==null)this.grammar="";},setParams:function(params){if(params!=null){var repaint=false;var recognize=false;var i=HxOverrides.iter(Reflect.fields(params));while(i.hasNext()){var vF=i.next();var value=Reflect.field(params,vF);vF=vF.toLowerCase();if(js.Boot.__instanceof(value,Bool)){if(js.Boot.va1(value,Bool))value="true";else value="false";};if(vF=="readonly")this.setReadOnly("true"==value);else if(vF=="toolbarhidden")this.setToolbarHidden("true"==value);else if(vF=="linecolor"){this.lineColor=value;repaint=true;}else if(vF=="linewidth"){this.lineWidth=value;repaint=true;}else if(vF=="recognitiondelay")this.recognitionDelay=value;else if(vF=="previewzoom"){this.previewZoom=value;recognize=true;}else if(vF=="constraints"){this.setConstraints(value);recognize=true;}else if(vF=="editionmode"){var vb1="true"==value;if(vb1!=this.editionMode){if(vb1)com.wiris.system.JsDOMUtils.v81(this.element,"wrs_editionMode");else com.wiris.system.JsDOMUtils.v71(this.element,"wrs_editionMode");this.editionMode=vb1;};repaint=true;}else if(vF=="deletiongesture")this.deletionGestureEnabled=value!="false";else if(vF=="recognitiontype"){com.wiris.system.JsDOMUtils.v71(this.element,"wrs_recognitionType_"+this.recognitionType);this.recognitionType=value;com.wiris.system.JsDOMUtils.v81(this.element,"wrs_recognitionType_"+this.recognitionType);}else if(vF=="useHTTPCredentials")com.wiris.system.ServiceProvider.vc1(value=="true");};if(repaint)this.repaint();if(recognize)this.recognize();}},urlAnswerReceived:function(url,parameters,status,vd1){if(url==com.wiris.js.JsHand.DEFAULT_LATEX2MATHML_SERVICE_URL){this.recognitionResult=vd1;this.renderPreviewImage();this.fireContentChanged();}},serviceAnswerReceived:function(serviceName,parameters,status,vd1){if((serviceName=="recognize"||serviceName=="strokes2text")&&parameters.get("r")==this.requestId){this.strokesResult=parameters.get("input");var ve1=haxe.Json.parse(vd1);this.status=ve1.status;if(ve1.status=="error"){this.errorMessage=ve1.errors[0];this.renderPreviewImage();this.fireRecognitionError(ve1.errors[0]);this.recognitionResult=null;this.recognitionScore=0.0;this.fireContentChanged();}else{var result=ve1.result;var update=true;if(serviceName=="strokes2text")this.recognitionResult="<math><mtext>"+StringTools.htmlEscape(result.text)+"</mtext></math>";else{var latex=Reflect.field(result,"latex");if(latex!=null){this.latex2mathml(latex);update=false;}else this.recognitionResult=result.mathml;};this.recognitionScore=result.score;if(update){this.renderPreviewImage();this.fireContentChanged();}}}else if(serviceName=="runtest"){var vf1=null;if(status>=400)vf1=this.testErrorCallbacks.shift();else vf1=this.testSuccessCallbacks.shift();if(vf1!=null)vf1(vd1);}else if(serviceName=="validate"){if(status!=200)js.Lib.alert("ERROR! Problem connecting to server: sample not validated");}else if(serviceName=="tick"&&vd1!=""&&!StringTools.startsWith(vd1,"Error:")&&!(("cordova"in window)||("wrs_hand_publicServices"in window)))this.showTickContainer(vd1);},latex2mathml:function(latex){var params=new HaxeHash();params.set("latex",latex);com.wiris.system.ServiceProvider.vg1(com.wiris.js.JsHand.DEFAULT_LATEX2MATHML_SERVICE_URL,params,"convert latex recognition",this);},validateResult:function(strokes,user){var params=new HaxeHash();params.set("input",strokes);params.set("value",user);com.wiris.system.ServiceProvider.vh1("recognize",params,this);},runTest:function(vi1,vj1){this.testSuccessCallbacks.push(vi1);this.testErrorCallbacks.push(vj1);var params=new HaxeHash();com.wiris.system.ServiceProvider.vh1("runtest",params,this);},findPaths:function(){var basePath=null;var vk1="hand.js";var vl1=js.Lib.document.getElementsByTagName("script");var vd=0,vc=vl1.length;while(vd<vc){var i=vd++;var src=vl1[i].src;var vm1=src.lastIndexOf("/"+vk1);if(vm1>=0)basePath=HxOverrides.substr(src,0,vm1);else if(src==vk1)basePath="";};var vn1=basePath;return[basePath,vn1];},fitStrokes:function(vo1){if(vo1==null)vo1=false;if(this.element==null)return;var set=false;var vC1=-1;var vD1=-1;var vE1=-1;var vF1=-1;var i=0;while(i<this.strokes.length){var vm1=0;while(vm1<this.strokes[i].length){if(!set){vC1=this.strokes[i][vm1][0];vD1=this.strokes[i][vm1][1];vE1=vC1;vF1=vD1;set=true;}else{if(this.strokes[i][vm1][0]<vC1)vC1=this.strokes[i][vm1][0];if(this.strokes[i][vm1][0]>vE1)vE1=this.strokes[i][vm1][0];if(this.strokes[i][vm1][1]<vD1)vD1=this.strokes[i][vm1][1];if(this.strokes[i][vm1][1]>vF1)vF1=this.strokes[i][vm1][1];};++vm1;};++i;};if(!set){this.strokesZoom=1;this.strokesDX=0;this.strokesDY=0;}else if(vo1||this.tX(vC1)<-1||this.tY(vD1)<-1||this.tX(vE1)>this.canvasWidth+1||this.tY(vF1)>this.canvasHeight+1){var vp1=this.canvasWidth*com.wiris.js.JsHand.DEFAULT_RELATIVE_FIT_MARGIN;var vq1=this.canvasHeight*com.wiris.js.JsHand.DEFAULT_RELATIVE_FIT_MARGIN;var vr1=vE1-vC1;var vs1=vF1-vD1;var vt1=this.canvasWidth-2*vp1;var vu1=this.canvasHeight-2*vq1;this.strokesZoom=1;var vv1=vt1*com.wiris.js.JsHand.DEFAULT_FIT_WIDTH_PER_CHARACTER_PROPORTION*this.strokes.length;if(vr1*this.strokesZoom<vv1)this.strokesZoom=vv1/(vr1*this.strokesZoom);if(vr1*this.strokesZoom>vt1)this.strokesZoom*=vt1/(vr1*this.strokesZoom);if(vs1*this.strokesZoom>vu1)this.strokesZoom*=vu1/(vs1*this.strokesZoom);if(this.strokesZoom==0)this.strokesZoom=1;this.strokesDX=-this.strokesZoom*vC1;this.strokesDY=-this.strokesZoom*vD1;this.strokesDX+=vp1+(vt1-vr1*this.strokesZoom)/2.0;this.strokesDY+=vq1+(vu1-vs1*this.strokesZoom)/2.0;this.repaint();}},playStrokes:function(input,vw1,vx1,vy1){var vc=this;this.hidePreviewImage();this.strokes=haxe.Json.parse(input);this.resetUndoBuffer();this.manageUndoRedoButtons();this.fitStrokes(true);var vz1=this.strokes;this.strokes=this.newStrokeBuffer();var i=0;var vm1=0;if(vz1.length>0)this.strokes.push([]);this.playing=true;var v02=(function(vA){var vB;var v12=null;v12=function(){if(!vc.playing)return;if(i<vz1.length){if(vm1<vz1[i].length){vc.strokes[vc.strokes.length-1].push(vz1[i][vm1]);++vm1;vc.repaint();setTimeout(v12,vw1);}else{if(vc.getDeletionPolygon()!=null){vc.applyDeletionGesture();vc.repaint();};++i;vm1=0;if(i<vz1.length)vc.strokes.push([]);setTimeout(v12,vx1);}}else{vc.playing=false;if(vy1!=null)vy1();}};vB=v12;return vB;}(this));v02();},setStrokes:function(input){this.strokes=haxe.Json.parse(input);this.resetUndoBuffer();this.fireRepaintAndRecognize();},getStrokes:function(){var v22=new Array();var i=HxOverrides.iter(this.strokes);while(i.hasNext()){var stroke=i.next();if(stroke.length>0)v22.push(stroke);};return haxe.Json.stringify(v22);},insertStrokesAnnotationInMathML:function(mml,v32){var end=mml.indexOf("</semantics>");if(end>=0)return mml.substring(0,end)+v32+mml.substring(end);var v42=false;var i=Xml.parse(mml).elements();while(i.hasNext()){var element=i.next();if(element.getNodeName().toLowerCase()=="math"){i=element.elements();v42=i.hasNext()&&i.next()!=null&&i.hasNext();break;}};var v52=mml.indexOf("<math");var v62=mml.indexOf(">",v52)+1;end=mml.indexOf("</math>");if(end<0){mml=mml.substring(0,v62-2)+"></math>";--v62;end=v62;};var v72=mml.substring(v52,v62);if(v42)return v72+"<semantics><mrow>"+mml.substring(v62,end)+"</mrow>"+v32+"</semantics></math>";return v72+"<semantics>"+mml.substring(v62,end)+v32+"</semantics></math>";},getStrokesAnnotationFromMathML:function(mml){var v82="<annotation encoding=\"application/json\">";var start=mml.indexOf(v82);if(start<0)return null;var v92="</annotation>";var end=mml.indexOf(v92,start);var result=new HaxeHash();result.set("start",start);result.set("end",end+v92.length);result.set("strokesString",mml.substring(start+v82.length,end));result.set("annotationString",mml.substring(start,end+v92.length));return result;},setMathML:function(mml){var result=this.getStrokesAnnotationFromMathML(mml);if(result!=null){this.strokes=haxe.Json.parse(result.get("strokesString"));mml=mml.substring(0,result.get("start"))+mml.substring(result.get("end"));}else this.strokes=this.newStrokeBuffer();this.strokesResult=this.getStrokes();this.resetUndoBuffer();this.repaint();this.recognitionResult=mml;this.recognitionScore=0.0;this.renderPreviewImage();this.fireStrokesChanged();this.fireContentChanged();},getMathMLWithStrokes:function(){var v32="<annotation encoding=\"application/json\">"+this.strokesResult+"</annotation>";var mml=this.getMathML();return this.insertStrokesAnnotationInMathML(mml,v32);},getScore:function(){return this.recognitionScore;},getMathML:function(){return this.recognitionResult==null?"<math></math>":this.recognitionResult;},addHandListener:function(listener){this.handListeners.push(listener);},updateGUI:function(){if(this.element.parentNode==null)return;var vA2=this.element.parentNode.offsetHeight-2;var vB2=this.element.parentNode.offsetWidth-2;if(!this.readOnly&&!this.toolbarHidden)vB2-=41;if(this.tickContainer!=null)vA2-=this.tickContainer.offsetHeight+2;if(vB2!=this.canvasWidth||vA2!=this.canvasHeight){this.element.style.height=this.element.parentNode.offsetHeight+"px";this.toolbarElement.style.height=this.element.parentNode.offsetHeight-2-4+"px";this.canvasWidth=vB2;this.canvasHeight=vA2;this.canvas.setAttribute("width",this.canvasWidth+"");this.canvas.setAttribute("height",this.canvasHeight+"");this.fitStrokes();this.repaint();}},manageUndoRedoButtons:function(){if(this.element==null)return;if(this.undoPosition>0)com.wiris.system.JsDOMUtils.v71(this.undoButton,"wrs_disabled");else com.wiris.system.JsDOMUtils.v81(this.undoButton,"wrs_disabled");if(this.undoPosition<this.undoBuffer.length)com.wiris.system.JsDOMUtils.v71(this.redoButton,"wrs_disabled");else com.wiris.system.JsDOMUtils.v81(this.redoButton,"wrs_disabled");if(this.strokes.length>0){com.wiris.system.JsDOMUtils.v71(this.clearButton,"wrs_disabled");com.wiris.system.JsDOMUtils.v71(this.canvasContainer,"wrs_empty");}else{com.wiris.system.JsDOMUtils.v81(this.clearButton,"wrs_disabled");com.wiris.system.JsDOMUtils.vZ1(this.canvasContainer,"wrs_empty");}},clear:function(){this.movingPoint=false;this.finishEditionStroke();this.insertUndoItem({type:"clear",strokes:this.newStrokeBuffer(this.strokes)});this.strokes=this.newStrokeBuffer();this.fireRepaintAndRecognize();},redo:function(){if(this.undoPosition>=this.undoBuffer.length)return;this.movingPoint=false;this.finishEditionStroke();var vC2=this.undoBuffer[this.undoPosition];++this.undoPosition;if(vC2.type=="add")this.strokes.push(vC2.stroke);else if(vC2.type=="remove")this.strokes.splice(vC2.position,1);else if(vC2.type=="clear")this.strokes=this.newStrokeBuffer();this.strokesDX=vC2.strokesDX;this.strokesDY=vC2.strokesDY;this.strokesZoom=vC2.strokesZoom;this.fireRepaintAndRecognize();},undo:function(){if(this.undoPosition==0)return;this.movingPoint=false;this.finishEditionStroke();--this.undoPosition;var vC2=this.undoBuffer[this.undoPosition];if(vC2.type=="add")this.strokes.pop();else if(vC2.type=="remove")this.strokes.splice(vC2.position,0,vC2.stroke);else if(vC2.type=="clear")this.strokes=this.newStrokeBuffer(vC2.strokes);this.strokesDX=vC2.strokesDX;this.strokesDY=vC2.strokesDY;this.strokesZoom=vC2.strokesZoom;this.fireRepaintAndRecognize();},insertUndoItem:function(vC2){vC2.strokesDX=this.strokesDX;vC2.strokesDY=this.strokesDY;vC2.strokesZoom=this.strokesZoom;this.undoBuffer.splice(this.undoPosition,0,vC2);++this.undoPosition;this.deleteRedoBuffer();},repaint:function(){if(this.element==null)return;this.context.clearRect(0,0,this.canvasWidth,this.canvasHeight);if(this.strokes.length==0)return;var n=this.strokes.length;var vD2=this.getDeletionPolygon();if(vD2!=null){--n;if(com.wiris.js.JsHand.DEBUG)this.paintStroke(vD2,"#ffff00",0,true);};var i=0;while(i<n){if(vD2!=null&&this.strokeIsContained(this.strokes[i],this.lastDeletedStrokes))this.paintStroke(this.strokes[i],com.wiris.js.JsHand.DEFAULT_DELETION_DELETED_STROKE_COLOR,this.lineWidth);else this.paintStroke(this.strokes[i],this.lineColor,this.lineWidth);++i;};if(vD2!=null)this.paintStroke(this.strokes[this.strokes.length-1],com.wiris.js.JsHand.DEFAULT_DELETION_LINE_COLOR,this.lineWidth);},paintPoints:function(stroke){this.context.lineWidth=1;this.context.strokeStyle=com.wiris.js.JsHand.DEFAULT_EDITION_MARKER_LINE_COLOR;var i=HxOverrides.iter(stroke);while(i.hasNext()){var vE2=i.next();if(vE2==this.editionPoint)this.context.fillStyle=com.wiris.js.JsHand.DEFAULT_EDITION_SELECTED_MARKER_BACKGROUND_COLOR;else this.context.fillStyle=com.wiris.js.JsHand.DEFAULT_EDITION_MARKER_BACKGROUND_COLOR;this.context.fillRect(this.tX(vE2[0])-com.wiris.js.JsHand.DEFAULT_EDITION_MARKER_SIZE/2,this.tY(vE2[1])-com.wiris.js.JsHand.DEFAULT_EDITION_MARKER_SIZE/2,com.wiris.js.JsHand.DEFAULT_EDITION_MARKER_SIZE,com.wiris.js.JsHand.DEFAULT_EDITION_MARKER_SIZE);this.context.beginPath();this.context.rect(this.tX(vE2[0])-com.wiris.js.JsHand.DEFAULT_EDITION_MARKER_SIZE/2,this.tY(vE2[1])-com.wiris.js.JsHand.DEFAULT_EDITION_MARKER_SIZE/2,com.wiris.js.JsHand.DEFAULT_EDITION_MARKER_SIZE,com.wiris.js.JsHand.DEFAULT_EDITION_MARKER_SIZE);this.context.stroke();}},paintStroke:function(stroke,color,width,fill){if(fill==null)fill=false;this.context.lineWidth=width;this.context.strokeStyle=color;this.context.lineJoin="round";this.context.lineCap="round";if(stroke.length>0){this.context.beginPath();var i=0;var x=this.tX(stroke[i][0]);var vO=this.tY(stroke[i][1]);this.context.moveTo(x,vO);++i;while(i<stroke.length-1){x=this.tX(stroke[i][0]);vO=this.tY(stroke[i][1]);var vF2=(stroke[i][0]+stroke[i+1][0])/2;var vG2=(stroke[i][1]+stroke[i+1][1])/2;this.context.quadraticCurveTo(x,vO,this.tX(vF2),this.tY(vG2));++i;};if(i==stroke.length)i=0;var vH2=x;var vI2=vO;x=this.tX(stroke[i][0]);vO=this.tY(stroke[i][1]);if(vH2-x==0&&vI2-vO==0)++x;this.context.lineTo(x,vO);if(fill){this.context.fillStyle=color;this.context.fill();};this.context.stroke();};if(this.editionMode&&this.editing)this.paintPoints(stroke);},itY:function(vJ2){return(vJ2-this.strokesDY)/this.strokesZoom;},itX:function(vK2){return(vK2-this.strokesDX)/this.strokesZoom;},tY:function(vO){return this.strokesDY+vO*this.strokesZoom;},tX:function(x){return this.strokesDX+x*this.strokesZoom;},getDeletionPolygon:function(){if(!this.deletionGestureEnabled||!this.painting&&!this.playing||this.strokes.length==0)return null;var vL2=this.strokes[this.strokes.length-1];if(vL2.length==0)return null;var vC1=vL2[0][0];var vE1=vL2[0][0];var vD1=vL2[0][1];var vF1=vL2[0][1];var vM2=false;var i=1;var n=com.wiris.js.JsHand.DEFAULT_DELETION_GESTURE_INTERSECTIONS;while(i<vL2.length){if(vL2[i][0]<vC1)vC1=vL2[i][0];if(vL2[i][0]>vE1)vE1=vL2[i][0];if(vL2[i][1]<vD1)vD1=vL2[i][1];if(vL2[i][1]>vF1)vF1=vL2[i][1];if(!vM2){var vN2=0;var vO2=0;var vP2=0;var vQ2=0;var vR2=(vE1-vC1)*com.wiris.js.JsHand.DEFAULT_DELETION_DIAGONAL_OFFSET;var vS2=(vF1-vD1)*com.wiris.js.JsHand.DEFAULT_DELETION_DIAGONAL_OFFSET;var vm1=1;while(vm1<vL2.length){if(this.segmentsIntersect(vL2[vm1-1],vL2[vm1],[vC1+vR2,vD1],[vE1,vF1-vS2]))++vN2;if(this.segmentsIntersect(vL2[vm1-1],vL2[vm1],[vC1,vD1+vS2],[vE1-vR2,vF1]))++vO2;if(this.segmentsIntersect(vL2[vm1-1],vL2[vm1],[vE1-vR2,vD1],[vC1,vF1-vS2]))++vP2;if(this.segmentsIntersect(vL2[vm1-1],vL2[vm1],[vE1,vD1+vS2],[vC1+vR2,vF1]))++vQ2;++vm1;};if(vN2>=n&&vO2>=n||vP2>=n&&vQ2>=n)vM2=true;};++i;};if(!vM2)return null;this.lastDeletedStrokes=new Array();var vD2=this.polyLineToPolygon(vL2,vC1,vD1,vE1,vF1);if(vD2==null)return null;var vT2=0;while(vT2<this.strokes.length-1){if(!this.strokeIsContained(this.strokes[vT2],this.lastDeletedStrokes)&&this.strokeIsDeleted(this.strokes[vT2],vD2))this.lastDeletedStrokes.push(this.strokes[vT2]);++vT2;};if(this.lastDeletedStrokes.length>0)return vD2;return null;},applyDeletionGesture:function(){this.strokes.pop();this.undoBuffer.splice(this.undoPosition-1,1);--this.undoPosition;var i=0;while(i<this.strokes.length)if(this.strokeIsContained(this.strokes[i],this.lastDeletedStrokes)){this.insertUndoItem({type:"remove",stroke:this.strokes[i],position:i});this.strokes.splice(i,1);}else++i;},strokeIsDeleted:function(stroke,vD2){if(stroke.length==0)return false;if(this.pointInsidePolygon(stroke[0],vD2))return true;var i=1;while(i<stroke.length){if(this.pointInsidePolygon(stroke[i],vD2))return true;if(this.segmentsIntersect(stroke[i-1],stroke[i],vD2[vD2.length-1],vD2[0]))return true;var vm1=1;while(vm1<vD2.length){if(this.segmentsIntersect(stroke[i-1],stroke[i],vD2[vm1-1],vD2[vm1]))return true;++vm1;};++i;};return false;},strokeIsContained:function(stroke,stack){var i=HxOverrides.iter(stack);while(i.hasNext())if(i.next()==stroke)return true;return false;},insertCSS:function(){var link=js.Lib.document.createElement("link");link.setAttribute("rel","stylesheet");link.setAttribute("type","text/css");link.setAttribute("href",this.resourceLoader.getPath("hand.css"));js.Lib.document.getElementsByTagName("head")[0].appendChild(link);},getElement:function(){var vc=this;if(this.element!=null)return this.element;com.wiris.system.JsDOMUtils.init();this.insertCSS();this.element=js.Lib.document.createElement("div");this.element.className="wrs_hand wrs_recognitionType_math";this.toolbarElement=js.Lib.document.createElement("div");this.toolbarElement.className="wrs_toolbar";this.undoButton=this.createButton("undo.svg",function(e){vc.undo();});this.redoButton=this.createButton("redo.svg",function(e){vc.redo();});this.clearButton=this.createButton("trash.svg",function(e){vc.clear();});var vU2=js.Lib.document.createElement("div");vU2.className="wrs_editionContainer";this.toolbarElement.appendChild(vU2);this.createLine(vU2);this.editionButton=this.createButton("edit.svg",function(e){if(vc.editing){com.wiris.system.JsDOMUtils.v71(vc.element,"wrs_editing");com.wiris.system.JsDOMUtils.v71(vc.editionButton,"wrs_pressed");}else{com.wiris.system.JsDOMUtils.v81(vc.element,"wrs_editing");com.wiris.system.JsDOMUtils.v81(vc.editionButton,"wrs_pressed");};vc.editing=!vc.editing;vc.movingPoint=false;vc.finishEditionStroke();vc.repaint();},vU2);var vV2=js.Lib.document.createElement("div");vV2.className="wrs_subEditionContainer";vU2.appendChild(vV2);this.removePointButton=this.createButton("remove_point.svg",function(e){vc.removeEditionPoint();},vV2);this.insertBeforePointButton=this.createButton("insert_point_before.svg",function(e){vc.insertBeforePoint();},vV2);this.insertAfterPointButton=this.createButton("insert_point_after.svg",function(e){vc.insertAfterPoint();},vV2);this.createEditionStrokeButton=this.createButton("create_stroke.svg",function(e){if(vc.creatingEditionStroke)vc.finishEditionStroke();else vc.createEditionStroke();},vV2);this.moveUpButton=this.createButton("move_up.svg",null,vV2);this.moveDownButton=this.createButton("move_down.svg",null,vV2);var vW2=false;var vX2=function(vJ1,vK1){if(!vW2)return;var i=HxOverrides.iter(vc.strokes);while(i.hasNext()){var vm1=HxOverrides.iter(i.next());while(vm1.hasNext()){var vE2=vm1.next();vE2[0]+=vJ1;vE2[1]+=vK1;}};vc.repaint();setTimeout(function(){vX2(vJ1,vK1);},1000/24);};com.wiris.system.JsDOMUtils.addEventListener(this.moveUpButton,"mousedown",function(e){vW2=true;vX2(0,-1);});com.wiris.system.JsDOMUtils.addEventListener(this.moveDownButton,"mousedown",function(e){vW2=true;vX2(0,1);});com.wiris.system.JsDOMUtils.addEventListener(js.Lib.document,"mouseup",function(e){vW2=false;});if(this.editionMode)com.wiris.system.JsDOMUtils.v81(this.element,"wrs_editionMode");this.helpButton=this.createButton("help.svg",function(e){if(com.wiris.system.JsDOMUtils.v61(vc.element,"wrs_withHelp"))vc.hideHelp();else vc.showHelp();});com.wiris.system.JsDOMUtils.addEventListener(this.helpButton,"mousedown",function(e){com.wiris.system.JsDOMUtils.vY2(e);e.stopPropagation();});this.canvasContainer=js.Lib.document.createElement("div");this.canvasContainer.className="wrs_canvasContainer";this.canvas=js.Lib.document.createElement("canvas");this.canvasWidth=0;this.canvasHeight=0;this.canvas.className="wrs_canvas";this.canvas.setAttribute("width",this.canvasWidth+"");this.canvas.setAttribute("height",this.canvasHeight+"");this.context=this.canvas.getContext("2d");this.canvasContainer.appendChild(this.canvas);this.snackbar=new com.wiris.e1_5(this.canvasContainer);if((("cordova"in window)||("wrs_hand_publicServices"in window))){this.previewMathML=js.Lib.document.createElement("div");this.previewMathML.className="wrs_previewMathML";this.canvasContainer.appendChild(this.previewMathML);};this.previewImage=js.Lib.document.createElement("img");this.previewImage.className="wrs_previewImage";this.canvasContainer.appendChild(this.previewImage);this.element.appendChild(this.toolbarElement);this.element.appendChild(this.canvasContainer);var vZ2=new haxe.Timer(100);vZ2.run=vA1(this,this.updateGUI);com.wiris.system.JsDOMUtils.addEventListener(this.canvas,"touchstart",vA1(this,this.onCanvasElementTouchStart));com.wiris.system.JsDOMUtils.addEventListener(this.canvas,"touchmove",vA1(this,this.onCanvasElementTouchMove));com.wiris.system.JsDOMUtils.addEventListener(this.canvas,"touchend",vA1(this,this.onCanvasElementTouchEnd));com.wiris.system.JsDOMUtils.addEventListener(this.canvas,"mousedown",vA1(this,this.onCanvasElementMouseDown));com.wiris.system.JsDOMUtils.addEventListener(this.canvas,"mousemove",vA1(this,this.onCanvasElementMouseMove));com.wiris.system.JsDOMUtils.addEventListener(this.canvas,"mouseup",vA1(this,this.onCanvasElementMouseEnd));com.wiris.system.JsDOMUtils.addEventListener(this.canvas,"mouseleave",vA1(this,this.onCanvasElementMouseEnd));com.wiris.system.JsDOMUtils.addEventListener(js.Lib.document,"keypress",vA1(this,this.onDocumentKeyPress));com.wiris.system.JsDOMUtils.addEventListener(js.Lib.document,"touchstart",vA1(this,this.onDocumentMouseDown));com.wiris.system.JsDOMUtils.addEventListener(js.Lib.document,"mousedown",vA1(this,this.onDocumentMouseDown));var self=this;if(navigator.va2)this.canvas.vb2=function(e){e.preventDefault();};if(!(("cordova"in window)||("wrs_hand_publicServices"in window)))com.wiris.system.ServiceProvider.vh1("tick",null,this);this.manageUndoRedoButtons();this.setReadOnly(this.readOnly);this.setToolbarHidden(this.toolbarHidden);this.repaint();this.renderPreviewImage();return this.element;},createButton:function(vc2,vd2,parent){if(parent==null)parent=this.toolbarElement;var button=js.Lib.document.createElement("div");button.className="wrs_button";button.appendChild(this.getIcon(vc2));parent.appendChild(button);if(vd2!=null)com.wiris.system.JsDOMUtils.addEventListener(button,"click",vd2);return button;},createLine:function(parent){if(parent==null)parent=this.toolbarElement;var line=js.Lib.document.createElement("div");line.className="wrs_line";parent.appendChild(line);},getIcon:function(vc2){var img=js.Lib.document.createElement("img");var path=this.resourceLoader.getPath("decoration/"+vc2);if(("cordova"in window)||("wrs_hand_publicServices"in window)&&(wrs_hand_publicServices.getPlatformName()=="android"&&wrs_hand_publicServices.getPlatformVersion()<"19"))path=StringTools.replace(path,".svg",".png");img.setAttribute("src",path);return img;},recognize:function(){if(this.strokes.length==0){this.recognitionResult=null;this.recognitionScore=0.0;this.strokesResult=this.getStrokes();this.hidePreviewImage();this.fireContentChanged();}else{this.loadingPreviewImage();this.generateRequestId();this.strokesSent=this.getStrokes();if(("cordova"in window)){var ve2=this.requestId;var vf2=this.strokesSent;var self=this;cordova.exec(function(vd1){if(ve2==self.requestId){self.strokesResult=self.strokesSent;var ve1=haxe.Json.parse(vd1);self.status=ve1.status;if(ve1.status=="error"){self.errorMessage=ve1.errors[0];self.renderPreviewImage();self.fireRecognitionError(ve1.errors[0]);self.recognitionResult=null;self.recognitionScore=0.0;}else{self.recognitionResult=ve1.result.mathml;self.recognitionScore=ve1.result.score;self.renderPreviewImage();};self.fireContentChanged();viewer.run();}},function(error){js.Lib.alert("There has been an unknown error. This should not happen.");},"Hand","mathRecognition",[vf2,this.symbolList,this.structureList]);}else if(("wrs_hand_publicServices"in window))wrs_hand_publicServices.strokes2mathmlAsync(this.strokesSent,haxe.Json.stringify({symbols:this.symbolList,structure:this.structureList}),"(function(s,r,w,e){"+this.getInstancePath()+".onPublicServicesResult(\""+this.requestId+"\",s,r,w,e);})");else{var params=new HaxeHash();params.set("input",this.strokesSent);params.set("s",this.sessionId);params.set("r",this.requestId);if(this.recognitionType=="text")com.wiris.system.ServiceProvider.vh1("strokes2text",params,this);else{if(this.symbolList.length>0)params.set("symbols",this.symbolList);if(this.structureList.length>0)params.set("structure",this.structureList);if(this.grammar.length>0)params.set("grammar",this.grammar);com.wiris.system.ServiceProvider.vh1("recognize",params,this);}}}},recognizeWithDelay:function(){if(this.recognitionTimer!=null)this.recognitionTimer.stop();this.recognitionTimer=haxe.Timer.delay(vA1(this,this.recognize),this.recognitionDelay);},hidePreviewImage:function(){if(this.element==null)return;if((("cordova"in window)||("wrs_hand_publicServices"in window)))this.previewMathML.innerHTML="";com.wiris.system.JsDOMUtils.v71(this.canvasContainer,"wrs_withPreview");},renderPreviewImage:function(){if(this.element==null)return;if(this.recognitionResult==null&&this.errorMessage==null){this.hidePreviewImage();return;};var mathml=this.recognitionResult;var zoom=this.previewZoom;if(this.status=="error"){mathml="<math mathcolor=\"#"+com.wiris.js.JsHand.DEFAULT_ERROR_COLOR+"\"><mtext>"+this.errorMessage+"</mtext></math>";zoom=1.0;}else if(this.status=="warning"&&com.wiris.js.JsHand.DEFAULT_WARNING_COLOR!=null)mathml=mathml.split("<math").join("<math mathcolor=\"#"+com.wiris.js.JsHand.DEFAULT_WARNING_COLOR+"\"");if((("cordova"in window)||("wrs_hand_publicServices"in window))){com.wiris.system.JsDOMUtils.v71(this.canvasContainer,"wrs_withPreview");this.previewMathML.innerHTML=mathml;}else{this.previewImage.setAttribute("src",com.wiris.js.JsHand.DEFAULT_EDITOR_SERVICE_URL+"/render.png?zoom="+zoom+"&centerbaseline=false&stats-app=hand&mml="+StringTools.urlEncode(mathml));com.wiris.system.JsDOMUtils.v81(this.canvasContainer,"wrs_withPreview");}},loadingPreviewImage:function(){if(this.element==null)return;if((("cordova"in window)||("wrs_hand_publicServices"in window)))this.previewMathML.innerHTML="";this.previewImage.setAttribute("src",this.resourceLoader.getPath("decoration/loading.gif"));com.wiris.system.JsDOMUtils.v81(this.canvasContainer,"wrs_withPreview");},onCanvasElementMouseEnd:function(e){if(this.editionMode&&this.editing&&this.movingPoint)this.movingPoint=false;if(this.getDeletionPolygon()!=null){this.applyDeletionGesture();this.painting=false;this.manageUndoRedoButtons();this.fireRepaintAndRecognize();}else this.painting=false;},onCanvasElementMouseMove:function(e){var vg2=com.wiris.system.JsDOMUtils.vh2(this.canvas,e);if(this.editionMode&&this.editing&&this.movingPoint){this.editionPoint[0]=this.itX(vg2[0]);this.editionPoint[1]=this.itY(vg2[1]);this.fireRepaintAndRecognize();}else if(this.painting){com.wiris.system.JsDOMUtils.vY2(e);this.addPoint(vg2);}},onCanvasElementMouseDown:function(e){if(com.wiris.system.JsDOMUtils.v61(this.element,"wrs_withHelp"))return;com.wiris.system.JsDOMUtils.vY2(e);var vg2=com.wiris.system.JsDOMUtils.vh2(this.canvas,e);if(this.editionMode&&this.editing){var x=this.itX(vg2[0]);var vO=this.itY(vg2[1]);if(this.creatingEditionStroke){if(this.editionStroke==null)this.editionStroke=this.startStroke();if(this.editionStroke.length>0){var vi2=this.editionStroke[this.editionStroke.length-1];if(vi2[0]==x&&vi2[1]==vO)this.finishEditionStroke();};if(this.creatingEditionStroke)this.editionStroke.push([x,vO]);this.fireRepaintAndRecognize();return;};var i=this.strokes.length-1;while(i>=0){var vm1=this.strokes[i].length-1;while(vm1>=0){var vj2=this.strokes[i][vm1][0];var vk2=this.strokes[i][vm1][1];var h=com.wiris.js.JsHand.DEFAULT_EDITION_MARKER_SIZE/2;if(x>=vj2-h&&x<=vj2+h&&vO>=vk2-h&&vO<=vk2+h){this.movingPoint=true;this.editionStroke=this.strokes[i];this.editionPoint=this.strokes[i][vm1];this.repaint();return;};--vm1;};--i;}};this.startStroke();this.addPoint(vg2);this.painting=true;},onCanvasElementTouchEnd:function(e){this.onCanvasElementMouseEnd(e);com.wiris.system.JsDOMUtils.vY2(e);},onCanvasElementTouchMove:function(e){if(e.touches.length>1)return;if(this.painting){com.wiris.system.JsDOMUtils.vY2(e);this.addPoint(com.wiris.system.JsDOMUtils.vl2(this.canvas,e.touches[0]));}},onCanvasElementTouchStart:function(e){if(com.wiris.system.JsDOMUtils.v61(this.element,"wrs_withHelp"))return;if(e.touches.length>1){if(this.painting&&e.touches.length==2){this.painting=false;this.undo();};return;};this.startStroke();this.addPoint(com.wiris.system.JsDOMUtils.vl2(this.canvas,e.touches[0]));this.painting=true;if(com.wiris.system.JsDOMUtils.vm2.vn2())com.wiris.system.JsDOMUtils.vY2(e);},startStroke:function(){if(this.readOnly)return null;var stroke=new Array();this.strokes.push(stroke);this.insertUndoItem({type:"add",stroke:this.strokes[this.strokes.length-1]});return stroke;},addPoint:function(vE2){if(this.readOnly)return;if(this.strokes.length==0)return;if(vE2[0]<0||vE2[1]<0||vE2[0]>this.canvasWidth||vE2[1]>this.canvasHeight)return;this.strokes[this.strokes.length-1].push([this.itX(vE2[0]),this.itY(vE2[1])]);this.fireRepaintAndRecognize();},deleteRedoBuffer:function(){this.undoBuffer.splice(this.undoPosition,this.undoBuffer.length-this.undoPosition);},resetUndoBuffer:function(){this.undoBuffer=new Array();this.undoPosition=0;},generateRequestId:function(){this.requestId=this.generateId(10);},generateId:function(n){var text="";var vo2="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789";while(n>0){text+=vo2.charAt(Std.random(vo2.length));--n;};return text;},close:function(){if(this.element!=null&&this.element.parentNode!=null){com.wiris.js.JsHand.instances[this.instanceIndex][0]=null;this.element.parentNode.removeChild(this.element);}},insertInto:function(parent){com.wiris.system.JsDOMUtils.vp2(parent);parent.appendChild(this.getElement());com.wiris.js.JsHand.instances[this.instanceIndex][0]=parent;},getInstancePath:function(){return"com.wiris.js.JsHand.instances["+this.instanceIndex+"][1]";},testErrorCallbacks:null,testSuccessCallbacks:null,helpTimeout:null,helpStoredUndoPosition:null,helpStoredUndoBuffer:null,helpStoredStrokes:null,moveDownButton:null,moveUpButton:null,createEditionStrokeButton:null,insertAfterPointButton:null,insertBeforePointButton:null,removePointButton:null,editionButton:null,creatingEditionStroke:null,editionPoint:null,editionStroke:null,movingPoint:null,editing:null,editionMode:null,recognitionType:null,grammar:null,structureList:null,symbolList:null,lineWidth:null,lineColor:null,recognitionDelay:null,previewZoom:null,toolbarHidden:null,readOnly:null,deletionGestureEnabled:null,lastDeletedStrokes:null,strokesDY:null,strokesDX:null,strokesZoom:null,undoPosition:null,undoBuffer:null,strokes:null,canvasHeight:null,canvasWidth:null,context:null,playing:null,painting:null,snackbar:null,tickContainer:null,canvasContainer:null,helpButton:null,clearButton:null,redoButton:null,undoButton:null,toolbarElement:null,canvas:null,previewMathML:null,previewImage:null,element:null,sessionId:null,status:null,requestId:null,strokesSent:null,handListeners:null,recognitionTimer:null,strokesResult:null,errorMessage:null,recognitionScore:null,recognitionResult:null,resourceLoader:null,instanceIndex:null,__class__:com.wiris.js.JsHand};com.wiris.e1_2=v6["com.wiris.e1_2"]=function(){};com.wiris.e1_2.__name__=["com","wiris","e1_2"];com.wiris.e1_2.prototype={vq2:null,vr2:null,vs2:null,vt2:null,string:null,__class__:com.wiris.e1_2};com.wiris.e1_3=v6["com.wiris.e1_3"]=function(){};com.wiris.e1_3.__name__=["com","wiris","e1_3"];com.wiris.e1_3.prototype={vq2:null,vs2:null,string:null,__class__:com.wiris.e1_3};com.wiris.e1_4=v6["com.wiris.e1_4"]=function(){this.vu2=new Array();this.vv2("navigator.userAgent",null,"Edge",null,"Edge");this.vv2("navigator.userAgent",null,"Chrome",null,"Chrome");this.vv2("navigator.userAgent",null,"OmniWeb",null,"OmniWeb");this.vv2("navigator.vendor",null,"Apple","Version","Safari");this.vv2(null,"window.opera",null,"Version","Opera");this.vv2("navigator.vendor",null,"iCab",null,"iCab");this.vv2("navigator.vendor",null,"KDE",null,"Konkeror");this.vv2("navigator.userAgent",null,"Firefox",null,"Firefox");this.vv2("navigator.vendor",null,"Camino",null,"Camino");this.vv2("navigator.userAgent",null,"Netscape",null,"Netscape");this.vv2("navigator.userAgent",null,"MSIE","MSIE","Explorer");this.vv2("navigator.userAgent",null,"Trident","rv","Explorer");this.vv2("navigator.userAgent",null,"Gecko","rv","Mozilla");this.vv2("navigator.userAgent",null,"Mozilla","Mozilla","Netscape");this.vw2=new Array();this.vx2("navigator.platform","Win","Windows");this.vx2("navigator.platform","Mac","Mac");this.vx2("navigator.userAgent","iPhone","iOS");this.vx2("navigator.userAgent","iPad","iOS");this.vx2("navigator.userAgent","Android","Android");this.vx2("navigator.platform","Linux","Linux");this.vy2();this.vz2();this.v03();};com.wiris.e1_4.__name__=["com","wiris","e1_4"];com.wiris.e1_4.prototype={v13:function(){return this.v23;},v33:function(){return this.v43=="Android";},v53:function(){return this.v43=="Mac";},vn2:function(){return this.v43=="iOS";},v63:function(){return this.vm2=="Firefox";},v73:function(){return this.vm2=="Safari";},v83:function(){return this.vm2=="Chrome";},v93:function(){return this.vm2=="Edge";},isIE:function(){return this.vm2=="Explorer";},vA3:function(){return this.vB3;},vC3:function(){return this.v43;},vD3:function(){return this.vm2;},vE3:function(vt2,search){var str=js.Boot.va1(eval(vt2),String);var index=str.indexOf(search);if(index==-1)return null;return""+Std.parseFloat(HxOverrides.substr(str,index+search.length+1,null));},v03:function(){if(this.vn2()||this.v33()){this.v23=true;return;};this.v23=false;},vz2:function(){var i=HxOverrides.iter(this.vw2);while(i.hasNext()){var s=i.next();var str=js.Boot.va1(eval(s.string),String);if(str.indexOf(s.vs2)!=-1){this.v43=s.vq2;return;}}},vy2:function(){var i=HxOverrides.iter(this.vu2);while(i.hasNext()){var b=i.next();if(b.string!=null){var obj=eval(b.string);if(obj!=null){var str=js.Boot.va1(obj,String);if(str.indexOf(b.vs2)!=-1){this.vm2=b.vq2;this.vB3=this.vE3("navigator.userAgent",b.vr2);if(this.vB3==null)this.vB3=this.vE3("navigator.appVersion",b.vr2);return;}}}}},vx2:function(string,vs2,vq2){var s=new com.wiris.e1_3();s.string=string;s.vs2=vs2;s.vq2=vq2;this.vw2.push(s);},vv2:function(string,vt2,vs2,vr2,vq2){var b=new com.wiris.e1_2();b.string=string;b.vt2=vt2;b.vs2=vs2;b.vr2=vr2!=null?vr2:vq2;b.vq2=vq2;this.vu2.push(b);},v23:null,v43:null,vB3:null,vm2:null,vw2:null,vu2:null,__class__:com.wiris.e1_4};com.wiris.system.JsDOMUtils=v6["com.wiris.system.JsDOMUtils"]=function(){};com.wiris.system.JsDOMUtils.__name__=["com","wiris","system","JsDOMUtils"];com.wiris.system.JsDOMUtils.vF3=null;com.wiris.system.JsDOMUtils.init=function(){if(com.wiris.system.JsDOMUtils.vG3)return;com.wiris.system.JsDOMUtils.vF3=new HaxeHash();com.wiris.system.JsDOMUtils.vF3.set("touchstart","MSPointerDown");com.wiris.system.JsDOMUtils.vF3.set("touchmove","MSPointerMove");com.wiris.system.JsDOMUtils.vF3.set("touchend","MSPointerUp");com.wiris.system.JsDOMUtils.vG3=true;com.wiris.system.JsDOMUtils.addEventListener(js.Lib.document,"MSPointerDown",function(e){com.wiris.system.JsDOMUtils.vH3.set(""+e.vI3,e);});com.wiris.system.JsDOMUtils.addEventListener(js.Lib.document,"MSPointerUp",function(e){com.wiris.system.JsDOMUtils.vH3=new HaxeHash();});com.wiris.system.JsDOMUtils.addEventListener(js.Lib.document,"scroll",function(e){com.wiris.system.JsDOMUtils.vH3=new HaxeHash();});var vJ3=false;var vK3=function(vL3){var i=HxOverrides.iter(vL3);while(i.hasNext()){var vf1=i.next();vf1();}};com.wiris.system.JsDOMUtils.addEventListener(js.Lib.document,"touchstart",function(e){if(!com.wiris.system.JsDOMUtils.vm2.v23){com.wiris.system.JsDOMUtils.vm2.v23=true;vK3(com.wiris.system.JsDOMUtils.vM3);};vJ3=true;});var vN3=function(e){if(!com.wiris.system.JsDOMUtils.vm2.v23){com.wiris.system.JsDOMUtils.vm2.v23=true;vK3(com.wiris.system.JsDOMUtils.vM3);};vJ3=true;setTimeout(function(){vJ3=false;},500);};com.wiris.system.JsDOMUtils.addEventListener(js.Lib.document,"touchend",vN3);com.wiris.system.JsDOMUtils.addEventListener(js.Lib.document,"touchleave",vN3);com.wiris.system.JsDOMUtils.addEventListener(js.Lib.document,"touchcancel",vN3);com.wiris.system.JsDOMUtils.addEventListener(js.Lib.document,"mousemove",function(e){if(!vJ3){if(com.wiris.system.JsDOMUtils.vm2.v23){com.wiris.system.JsDOMUtils.vm2.v23=false;vK3(com.wiris.system.JsDOMUtils.vO3);}}});};com.wiris.system.JsDOMUtils.addEventListener=function(element,vP3,vQ3){return com.wiris.system.JsDOMUtils.vR3(element,vP3,vQ3,false);};com.wiris.system.JsDOMUtils.vR3=function(element,vP3,vQ3,vS3){if(navigator.va2&&com.wiris.system.JsDOMUtils.vF3.exists(vP3)){vP3=com.wiris.system.JsDOMUtils.vF3.get(vP3);return com.wiris.system.JsDOMUtils.vR3(element,vP3,function(e){if(e.vT3=="touch"){if(vP3=="MSPointerUp")com.wiris.system.JsDOMUtils.vH3.remove(""+e.vI3);else com.wiris.system.JsDOMUtils.vH3.set(""+e.vI3,e);e.touches=new Array();var i=com.wiris.system.JsDOMUtils.vH3.iterator();while(i.hasNext())e.touches.push(i.next());vQ3(e);}},vS3);};if(vP3=="touchhold"&&com.wiris.system.JsDOMUtils.vm2.v13()){var vU3=null;var vV3=-1;var vW3=-1;var vX3=com.wiris.system.JsDOMUtils.vR3(element,"touchstart",function(e){vY3=true;vV3=e.touches[0].clientX;vW3=e.touches[0].clientY;vU3=setTimeout(function(){vU3=null;vQ3(e);},500);},vS3);vX3.vZ3.push(com.wiris.system.JsDOMUtils.vR3(element,"touchmove",function(e){if(vU3!=null){if(Math.abs(e.touches[0].clientX-vV3)>com.wiris.system.JsDOMUtils.va3||Math.abs(e.touches[0].clientY-vW3)>com.wiris.system.JsDOMUtils.va3){clearTimeout(vU3);vU3=null;}else com.wiris.system.JsDOMUtils.vY2(e);}},vS3));vX3.vZ3.push(com.wiris.system.JsDOMUtils.vR3(element,"touchend",function(e){if(vU3!=null){clearTimeout(vU3);vU3=null;}},vS3));return vX3;};var vX3={};vX3.element=element;vX3.vP3=vP3;vX3.vQ3=vQ3;vX3.vS3=vS3;vX3.vZ3=new Array();if(vP3=="dblclick"){var vb3=null;var vY3=false;var vc3=null;vX3.vZ3.push(com.wiris.system.JsDOMUtils.vR3(element,"touchstart",function(e){vY3=true;vb3=e;},vS3));vX3.vZ3.push(com.wiris.system.JsDOMUtils.vR3(element,"touchmove",function(e){vY3=false;},vS3));vX3.vZ3.push(com.wiris.system.JsDOMUtils.vR3(element,"touchend",function(e){if(vY3){vY3=false;var vd3=new Date().getTime();if(vc3==null||vd3>vc3+500)vc3=vd3;else{vb3.ve3=true;vQ3(e);}}},vS3));};if(element.attachEvent)element.attachEvent("on"+vP3,function(){vQ3(window.event);});else element.addEventListener(vP3,vQ3,vS3);return vX3;};com.wiris.system.JsDOMUtils.removeEventListener=function(vX3){if(com.wiris.system.JsDOMUtils.vm2.isIE()&&vX3.element.detachEvent)vX3.element.detachEvent("on"+Std.string(vX3.vP3),vX3.vQ3);else vX3.element.removeEventListener(vX3.vP3,vX3.vQ3,vX3.vS3);var i=vf3(vX3.vZ3)();while(i.hasNext())com.wiris.system.JsDOMUtils.removeEventListener(i.next());};com.wiris.system.JsDOMUtils.vY2=function(e){if(e.preventDefault)e.preventDefault();else e.returnValue=false;};com.wiris.system.JsDOMUtils.vg3=function(element,vP3){var vb3;if(document.vh3){vb3=document.vh3("HTMLEvents");vb3.vi3(vP3,true,true);vb3.vP3=vP3;element.vj3(vb3);}else{vb3=document.vk3();vb3.vl3=vP3;vb3.vP3=vP3;element.vg3("on"+vP3,vb3);}};com.wiris.system.JsDOMUtils.getComputedStyle=function(element){if(element.currentStyle)return element.currentStyle;return document.defaultView.getComputedStyle(element,null);};com.wiris.system.JsDOMUtils.vm3=function(element,name){var value;if(document.defaultView&&document.defaultView.getComputedStyle){var vn3=document.defaultView.getComputedStyle(element,null);value=vn3==null?null:vn3.getPropertyValue(name);}else if(com.wiris.system.JsDOMUtils.vm2.isIE()&&element.currentStyle){var vo3=com.wiris.system.JsDOMUtils.vp3(name);value=element.currentStyle[vo3];if(value!=null&&value.length>0&&vo3!="zoom"){var vq3=HxOverrides.cca(value,0);if(vq3>=48&&vq3<=57&&!StringTools.endsWith(value,"px")){var vr3=element.style.left;var vs3=element.runtimeStyle?element.runtimeStyle.left:null;if(vs3!=null)element.runtimeStyle.left=element.currentStyle.left;element.style.left=vo3=="fontSize"?"1em":value;value=element.style.pixelLeft+"px";element.style.left=vr3;if(vs3!=null)element.runtimeStyle.left=vs3;}}}else value=element.style[com.wiris.system.JsDOMUtils.vp3(name)];return value;};com.wiris.system.JsDOMUtils.vt3=function(){var context=document.createElement("canvas").getContext("2d");var vu3=window.vv3||1;var vw3=context.vx3||context.vy3||context.vz3||context.v04||context.v14||1;return vu3/vw3;};com.wiris.system.JsDOMUtils.vp3=function(str){var start=0;var pos;var v24=new StringBuf();while((pos=str.indexOf("-",start))!=-1){v24.b+=Std.string(HxOverrides.substr(str,start,pos-start));v24.b+=Std.string(str.charAt(pos+1).toUpperCase());start=pos+2;};v24.b+=Std.string(HxOverrides.substr(str,start,null));return v24.b;};com.wiris.system.JsDOMUtils.v34=function(parent,className,recursive){var returnValue=new Array();var vd=0,vc=parent.childNodes.length;while(vd<vc){var i=vd++;if(com.wiris.system.JsDOMUtils.v61(parent.childNodes[i],className))returnValue.push(parent.childNodes[i]);if(recursive)returnValue=returnValue.concat(com.wiris.system.JsDOMUtils.v34(parent.childNodes[i],className,true));};return returnValue;};com.wiris.system.JsDOMUtils.v44=function(vb3){if(vb3.srcElement)return vb3.srcElement;return vb3.target;};com.wiris.system.JsDOMUtils.getLeft=function(element){return element.getBoundingClientRect().left;};com.wiris.system.JsDOMUtils.v54=function(element,parent){if(parent==null)return com.wiris.system.JsDOMUtils.getLeft(element);return com.wiris.system.JsDOMUtils.getLeft(element)-com.wiris.system.JsDOMUtils.getLeft(parent);};com.wiris.system.JsDOMUtils.getTop=function(element){return element.getBoundingClientRect().top;};com.wiris.system.JsDOMUtils.v64=function(element,parent){if(parent==null)return com.wiris.system.JsDOMUtils.getTop(element);return com.wiris.system.JsDOMUtils.getTop(element)-com.wiris.system.JsDOMUtils.getTop(parent);};com.wiris.system.JsDOMUtils.v74=function(){var scroll=new Array();if(js.Lib.window.pageYOffset==undefined){scroll[0]=js.Lib.document.documentElement.scrollLeft;scroll[1]=js.Lib.document.documentElement.scrollTop;}else{scroll[0]=js.Lib.window.pageXOffset;scroll[1]=js.Lib.window.pageYOffset;};return scroll;};com.wiris.system.JsDOMUtils.v84=function(scroll){var x=scroll[0]|0;var vO=scroll[1]|0;js.Lib.window.scrollTo(x,vO);};com.wiris.system.JsDOMUtils.v94=function(keyCode,vA4){return keyCode==37&&!vA4||keyCode==39&&vA4;};com.wiris.system.JsDOMUtils.vB4=function(parent){var vC4=parent!=null?parent.firstChild:parent;while(vC4!=null){if(com.wiris.system.JsDOMUtils.vm3(vC4,"display")!="none")return vC4;vC4=vC4.nextSibling;};return null;};com.wiris.system.JsDOMUtils.vD4=function(parent,vE4){if(parent==null||vE4==null)return false;while(vE4.parentNode!=null){if(vE4.parentNode==parent)return true;vE4=vE4.parentNode;};return false;};com.wiris.system.JsDOMUtils.vF4=function(x){return x<0||x==null?0:x;};com.wiris.system.JsDOMUtils.vp2=function(element){while(element.firstChild!=null)element.removeChild(element.firstChild);};com.wiris.system.JsDOMUtils.v61=function(element,className){if(element==null||element.className==null||!(element.className.split))return false;var vG4=element.className.split(" ");var i=HxOverrides.iter(vG4);while(i.hasNext())if(i.next()==className)return true;return false;};com.wiris.system.JsDOMUtils.v81=function(element,className){if(element==null)return;if(element.className=="")element.className=className;else if(!com.wiris.system.JsDOMUtils.v61(element,className))element.className+=" "+className;};com.wiris.system.JsDOMUtils.v71=function(element,className){if(element==null||element.className==null||!(element.className.split))return;var vG4=element.className.split(" ");HxOverrides.remove(vG4,className);element.className=vG4.join(" ");};com.wiris.system.JsDOMUtils.vH4=function(element,className){if(com.wiris.system.JsDOMUtils.v61(element,className))com.wiris.system.JsDOMUtils.v71(element,className);else com.wiris.system.JsDOMUtils.v81(element,className);};com.wiris.system.JsDOMUtils.vZ1=function(element,className){if(!com.wiris.system.JsDOMUtils.v61(element,className))com.wiris.system.JsDOMUtils.v81(element,className);};com.wiris.system.JsDOMUtils.vI4=function(element,position,end){if(element.setSelectionRange)element.setSelectionRange(position,end);else if(element.createTextRange){var vJ4=element.createTextRange();vJ4.collapse(true);vJ4.moveStart("character",position);vJ4.moveEnd("character",end);vJ4.select();}};com.wiris.system.JsDOMUtils.vK4=function(element){var vL4=new Array();if(element.selectionStart!=null){vL4[0]=element.selectionStart;vL4[1]=element.selectionEnd;return vL4;};var vJ4=document.selection.createRange();if(vJ4&&vJ4.parentElement()==element){var length=element.value.length;var normalizedValue=element.value.split("\r\n").join("\n");var vM4=element.createTextRange();vM4.moveToBookmark(vJ4.getBookmark());var vN4=element.createTextRange();vN4.collapse(false);if(vM4.compareEndPoints("StartToEnd",vN4)>-1)vL4[0]=vL4[1]=length;else{vL4[0]=-vM4.moveStart("character",-length);vL4[0]+=normalizedValue.slice(0,vL4[0]).split("\n").length-1;if(vM4.compareEndPoints("EndToEnd",vN4)>-1)vL4[1]=length;else{vL4[1]=-vM4.moveEnd("character",-length);vL4[1]+=normalizedValue.slice(0,vL4[1]).split("\n").length-1;}};return vL4;};return null;};com.wiris.system.JsDOMUtils.vh2=function(target,e){if(e.ve3)return com.wiris.system.JsDOMUtils.vl2(target,e.touches[0]);var vO4=new Array();vO4[0]=target.scrollLeft;vO4[1]=target.scrollTop;return com.wiris.system.JsDOMUtils.vP4(target,e,vO4,0);};com.wiris.system.JsDOMUtils.vP4=function(target,e,vO4,border){var position=new Array();position[0]=e.clientX-com.wiris.system.JsDOMUtils.getLeft(target)-border+vO4[0];position[1]=e.clientY-com.wiris.system.JsDOMUtils.getTop(target)-border+vO4[1];return position;};com.wiris.system.JsDOMUtils.vQ4=function(element){while(element!=null){if(com.wiris.system.JsDOMUtils.vm3(element,"position")=="fixed")return true;element=element.offsetParent;};return false;};com.wiris.system.JsDOMUtils.vl2=function(target,touch){var vO4=new Array();vO4[0]=target.scrollLeft;vO4[1]=target.scrollTop;return com.wiris.system.JsDOMUtils.vR4(target,touch,vO4,0);};com.wiris.system.JsDOMUtils.vR4=function(target,touch,vO4,border){var position=new Array();position[0]=touch.clientX-com.wiris.system.JsDOMUtils.getLeft(target)-border+vO4[0];position[1]=touch.clientY-com.wiris.system.JsDOMUtils.getTop(target)-border+vO4[1];return position;};com.wiris.system.JsDOMUtils.vS4=function(e){if(e.touches)return 1;if("button"in e)return e.button+1;return 0;};com.wiris.system.JsDOMUtils.vT4=function(vU4){if(navigator.vT4)navigator.vT4(vU4);};com.wiris.system.JsDOMUtils.vV4=function(vf1){com.wiris.system.JsDOMUtils.init();com.wiris.system.JsDOMUtils.vM3.push(vf1);};com.wiris.system.JsDOMUtils.vW4=function(vf1){com.wiris.system.JsDOMUtils.init();com.wiris.system.JsDOMUtils.vO3.push(vf1);};com.wiris.system.JsDOMUtils.vX4=function(vY4){var vZ4=js.Lib.document.getElementsByTagName("script");var n=vZ4.length;var i=0;while(i<n){var src=vZ4[i].getAttribute("src");if(vY4.match(src))return vZ4[i];++i;};return null;};com.wiris.system.JsDOMUtils.va4=function(vb4){if(window.com.wiris.js.defaultServicePath!=null&&StringTools.startsWith(window.com.wiris.js.defaultServicePath,"http://")){var protocol=js.Lib.window.location.protocol;var vc4=window.com.wiris.js.defaultServicePath.substr("http:".length);var vY4=new EReg("(http:|https:)"+vc4+"/"+vb4,"");if(com.wiris.system.JsDOMUtils.vX4(vY4)!=null)protocol=vY4.matched(1);if(protocol=="https:"){window.com.wiris.js.defaultServicePath="https:"+vc4;if(window.com.wiris.js.defaultBasePath!=null)window.com.wiris.js.defaultBasePath="https:"+window.com.wiris.js.defaultBasePath.substr("http:".length);}}};com.wiris.system.JsDOMUtils.vd4=function(ve4,rules){var style=js.Lib.document.createElement("style");style.type="text/css";js.Lib.document.getElementsByTagName("head")[0].appendChild(style);if(style.sheet!=null&&style.sheet.insertRule!=null)style.sheet.insertRule(ve4+"{"+rules+"}",0);else if(style.styleSheet!=null)style.styleSheet.addRule(ve4,rules);else if(style.sheet!=null)style.sheet.addRule(ve4,rules);};com.wiris.system.JsDOMUtils.execCommand=function(command){return document.execCommand(command);};com.wiris.system.JsDOMUtils.vf4=function(vk1){var vl1=js.Lib.document.getElementsByTagName("script");var vn1=null;var vd=0,vc=vl1.length;while(vd<vc){var i=vd++;var src=vl1[i].src;var vm1=src.lastIndexOf("/"+vk1);if(vm1>=0)vn1=HxOverrides.substr(src,0,vm1);else if(src==vk1)vn1="";};if(vn1!=null&&StringTools.startsWith(vn1,"http://")&&js.Lib.window.location.protocol=="https:")vn1="https://"+HxOverrides.substr(vn1,"http://".length,null);return vn1;};com.wiris.system.JsDOMUtils.vg4=function(vh4,vW){var vO1=js.Lib.window;if(vO1.File&&vO1.vi4&&vO1.vj4&&vO1.vk4){var d=vh4.vl4;var vm4=d.createElement("input");vm4.setAttribute("name","data");vm4.setAttribute("type","file");vh4.appendChild(vm4);com.wiris.system.JsDOMUtils.init();com.wiris.system.JsDOMUtils.addEventListener(vm4,"change",function(e){if(vm4.vn4.length){var file=vm4.vn4[0];var vo4=new vi4();vo4.onload=function(vp4){vW(vp4.target.result);};vo4.vq4(file);};vh4.removeChild(vm4);});vm4.click();}else throw"Browser incompatible with JavaScript File API.";};com.wiris.system.JsDOMUtils.vr4=function(vh4,filename,vs4,vt4){var d=vh4.vl4;var vO1=js.Lib.window;if(vO1.vk4){var vu4=new vk4([vt4],{'type':vs4});var a=d.createElement("a");if('download'in a&&vO1.vv4){a.href=vO1.vv4.vw4(vu4);a.download=filename;vh4.appendChild(a);a.click();vh4.removeChild(a);return;}};throw"Browser incompatible with HTML object download anchors.";};com.wiris.system.JsDOMUtils.vx4=function(vy4,vz4){var v05=com.wiris.system.JsDOMUtils.v74();var v15=vz4;var vX3=com.wiris.system.JsDOMUtils.addEventListener(js.Lib.document,"focusin",function(e){v15=com.wiris.system.JsDOMUtils.v44(e);});vX3.vZ3.push(com.wiris.system.JsDOMUtils.addEventListener(vy4,"focusin",function(e){var v25=com.wiris.system.JsDOMUtils.v44(e);if(!com.wiris.system.JsDOMUtils.vD4(vz4,v25)){com.wiris.system.JsDOMUtils.v84(v05);var v35=com.wiris.system.JsDOMUtils.v45(js.Lib.document.body);var v55=0;while(v55<v35.length){if(v35[v55]==v25)break;++v55;};var direction=v15==v25||com.wiris.system.JsDOMUtils.v65(v15,v25)?1:-1;var v75=com.wiris.system.JsDOMUtils.v85(v35,vy4,vz4,v55,direction);if(v75!=null)v75.focus();e.stopPropagation();}else v05=com.wiris.system.JsDOMUtils.v74();}));var v25=js.Lib.document.v95;if(!com.wiris.system.JsDOMUtils.vD4(vz4,v25)){com.wiris.system.JsDOMUtils.v84(v05);var v35=com.wiris.system.JsDOMUtils.v45(js.Lib.document.body);var v55=0;while(v55<v35.length){if(v35[v55]==v25)break;++v55;};var v75=com.wiris.system.JsDOMUtils.v85(v35,vy4,vz4,v55,1);if(v75!=null)v75.focus();};return vX3;};com.wiris.system.JsDOMUtils.v85=function(v35,vy4,vz4,v55,direction,vA5){if(vA5==null)vA5=-100;var vB5=v55;v55+=direction;while(v55>=0&&v55<v35.length&&com.wiris.system.JsDOMUtils.vD4(vy4,v35[v55])&&!com.wiris.system.JsDOMUtils.vD4(vz4,v35[v55])){v55+=direction;if(v55==vA5)return null;};if(v55<0)return com.wiris.system.JsDOMUtils.v85(v35,vy4,vz4,v35.length-1,-1,vB5);if(v55>=v35.length)return com.wiris.system.JsDOMUtils.v85(v35,vy4,vz4,0,1,vB5);return v35[v55];};com.wiris.system.JsDOMUtils.vC5=function(vX3){com.wiris.system.JsDOMUtils.removeEventListener(vX3);};com.wiris.system.JsDOMUtils.v45=function(vD5){var elements=vD5.vE5("button, [href], input, select, textarea, [tabindex]:not([tabindex=\"-1\"])");var v35=new Array();var i=0;while(i<elements.length){if(com.wiris.system.JsDOMUtils.vm3(elements[i],"display")!="none"&&com.wiris.system.JsDOMUtils.vm3(elements[i],"visibility")!="hidden")v35.push(elements[i]);++i;};return v35;};com.wiris.system.JsDOMUtils.v65=function(vF5,vG5){if(vF5==vG5)throw"Trying to compare the same element.";var vH5=com.wiris.system.JsDOMUtils.vI5(vF5);var vJ5=com.wiris.system.JsDOMUtils.vI5(vG5);var i=1;var n=Math.min(vH5.length,vJ5.length)|0;while(i<n){if(vH5[i]!=vJ5[i])return com.wiris.system.JsDOMUtils.vK5(vH5[i])<com.wiris.system.JsDOMUtils.vK5(vJ5[i]);++i;};return false;};com.wiris.system.JsDOMUtils.vI5=function(element){var path=new Array();while(element!=null){path.splice(0,0,element);element=element.parentNode;};return path;};com.wiris.system.JsDOMUtils.vK5=function(element){if(element.parentNode==null)return-1;var i=0;while(i<element.parentNode.childNodes.length){if(element.parentNode.childNodes[i]==element)return i;++i;};return-1;};com.wiris.e1_5=v6["com.wiris.e1_5"]=function(parent){this.vD5=js.Lib.document.createElement("div");this.vD5.className="wrs_snackbar wrs_hidden";this.insertInto(parent);this.hidden=true;};com.wiris.e1_5.__name__=["com","wiris","e1_5"];com.wiris.e1_5.prototype={hide:function(){if(!this.hidden){this.hidden=true;com.wiris.system.JsDOMUtils.v81(this.vD5,"wrs_hidden");}},show:function(v91,vL5,vM5){this.hide();com.wiris.system.JsDOMUtils.vp2(this.vD5);var vN5=null;if(vL5!=null&&vM5!=null){vN5=js.Lib.document.createElement("span");vN5.className="wrs_snackbarActionButton";vN5.appendChild(js.Lib.document.createTextNode(vL5));com.wiris.system.JsDOMUtils.addEventListener(vN5,"click",vM5);this.vD5.appendChild(vN5);};var vO5=js.Lib.document.createElement("span");vO5.className="wrs_snackbarMessage";vO5.appendChild(js.Lib.document.createTextNode(v91));this.vD5.appendChild(vO5);this.vD5.setAttribute("title",v91);com.wiris.system.JsDOMUtils.v71(this.vD5,"wrs_hidden");this.hidden=false;if(vN5!=null)vO5.style.marginRight=vN5.offsetWidth+"px";},insertInto:function(parent){if(this.vD5.parentNode!=null)this.vD5.parentNode.removeChild(this.vD5);if(parent!=null)parent.appendChild(this.vD5);},hidden:null,vD5:null,__class__:com.wiris.e1_5};com.wiris.system.ResourceLoader=v6["com.wiris.system.ResourceLoader"]=function(){com.wiris.system.ResourceLoader.initialize();this.basePath="";};com.wiris.system.ResourceLoader.__name__=["com","wiris","system","ResourceLoader"];com.wiris.system.ResourceLoader.resourcesCache=null;com.wiris.system.ResourceLoader.initialize=function(){if(com.wiris.system.ResourceLoader.resourcesCache==null)com.wiris.system.ResourceLoader.resourcesCache=new HaxeHash();com.wiris.system.ResourceLoader.createObject(window,"com.wiris.system.ResourceLoader.translations".split("."));};com.wiris.system.ResourceLoader.createObject=function(parent,vP5){if(vP5.length==0)return;var next=vP5.shift();if(!parent[next])parent[next]={};com.wiris.system.ResourceLoader.createObject(parent[next],vP5);};com.wiris.system.ResourceLoader.newInstance=function(basePath){var resourceLoader=new com.wiris.system.ResourceLoader();if(basePath.length>0&&!StringTools.endsWith(basePath,"/"))basePath+="/";resourceLoader.basePath=basePath;return resourceLoader;};com.wiris.system.ResourceLoader.prototype={getPath:function(path){path+=(path.indexOf("?")>=0?"&":"?")+"v="+this.loadResource("version.txt");if(StringTools.startsWith(path,"http://")||StringTools.startsWith(path,"https://"))return path;return this.basePath+path;},loadStaticResource:function(path){if(path=="editor_definition.xml")return com.wiris.system.ResourceLoader.editorDefinition;if(path=="image_definition.xml")return com.wiris.system.ResourceLoader.imageDefinition;if(path=="image_definition_1_5.xml")return com.wiris.system.ResourceLoader.imageDefinition1_5;if(path=="image_definition_2.xml")return com.wiris.system.ResourceLoader.imageDefinition2;if(path=="characters.xml")return com.wiris.system.ResourceLoader.charactersDefinition;if(path=="version.txt"){if(com.wiris.system.ResourceLoader.version==null){};return com.wiris.system.ResourceLoader.version;};if(path=="font_adjust.xml")return com.wiris.system.ResourceLoader.fontAdjust;if(StringTools.startsWith(path,"lang/")){var lang=HxOverrides.substr(path,5,path.lastIndexOf(".")-5);if(com.wiris.system.ResourceLoader.translations[lang])return com.wiris.system.ResourceLoader.translations[lang];lang=lang.toLowerCase();lang=lang.split("-").join("_");if(com.wiris.system.ResourceLoader.translations[lang])return com.wiris.system.ResourceLoader.translations[lang];lang=HxOverrides.substr(lang,0,2);if(com.wiris.system.ResourceLoader.translations[lang])return com.wiris.system.ResourceLoader.translations[lang];};return null;},loadResource:function(path){var vQ5=this.loadStaticResource(path);if(vQ5!=null)return vQ5;vQ5=haxe.Resource.vR5(path);if(vQ5!=null)return vQ5;return null;},basePath:null,__class__:com.wiris.system.ResourceLoader};com.wiris.system.ServiceProvider=v6["com.wiris.system.ServiceProvider"]=function(){};com.wiris.system.ServiceProvider.__name__=["com","wiris","system","ServiceProvider"];com.wiris.system.ServiceProvider.vZ2=null;com.wiris.system.ServiceProvider.vh1=function(serviceName,parameters,listener){com.wiris.system.ServiceProvider.vS5(serviceName,parameters,null,listener);};com.wiris.system.ServiceProvider.vS5=function(serviceName,parameters,vT5,listener){var servicesPackage=eval("c"+"om.wiris.editor")?eval("c"+"om.wiris.editor.formula.services"):null;if(serviceName=="mathml2internal"&&servicesPackage&&eval("servicesPackage.MathMLToInternalService")){var vU5=eval("new servicesPackage.MathMLToInternalService()");var vV5=Std.string(vU5.toInternal(parameters.get("mml")))+"";listener.serviceAnswerReceived(serviceName,parameters,200,vV5);}else if(serviceName=="content2mathml"&&servicesPackage)listener.serviceAnswerReceived(serviceName,parameters,200,parameters.get("mml"));else if(serviceName=="tick"&&servicesPackage&&eval("servicesPackage.TickService")){var vU5=eval("new servicesPackage.TickService()");var vW5=Std.string(vU5.vX5())+"";listener.serviceAnswerReceived(serviceName,parameters,200,vW5);}else com.wiris.system.ServiceProvider.vY5(serviceName,true,parameters,vT5,listener);};com.wiris.system.ServiceProvider.vZ5=function(url,parameters,listener){com.wiris.system.ServiceProvider.vY5(url,false,parameters,null,listener);};com.wiris.system.ServiceProvider.vg1=function(url,parameters,vT5,listener){com.wiris.system.ServiceProvider.vY5(url,false,parameters,vT5,listener);};com.wiris.system.ServiceProvider.vY5=function(target,va5,parameters,vT5,listener){if(com.wiris.system.ServiceProvider.vb5==com.wiris.system.ServiceProvider.vc5)com.wiris.system.ServiceProvider.vd5(target,va5,parameters,listener);else if(com.wiris.system.ServiceProvider.vb5==com.wiris.system.ServiceProvider.v01)com.wiris.system.ServiceProvider.ve5(target,va5,parameters,vT5,listener);};com.wiris.system.ServiceProvider.vd5=function(target,va5,parameters,listener){var url=va5||!(StringTools.startsWith(target,"http://")||StringTools.startsWith(target,"https://"))?com.wiris.system.ServiceProvider.vf5(target):target;var vg5=(url.indexOf("?")==-1?"?":"&")+"jsonp="+Type.getClassName(com.wiris.system.ServiceProvider)+".answer_"+com.wiris.system.ServiceProvider.vh5+"&httpstatus=true";if(parameters!=null){var i=parameters.keys();while(i.hasNext()){var vF=i.next();vg5+="&"+StringTools.urlEncode(vF)+"="+StringTools.urlEncode(parameters.get(vF));}};if((url+vg5).length>com.wiris.system.ServiceProvider.vi5){var sessionVarName="wirisAnswer_"+haxe.Md5.encode(vg5);parameters.set("sessionVarName",sessionVarName);var iframe=js.Lib.document.createElement("iframe");js.Lib.document.body.appendChild(iframe);iframe.src="about:blank";iframe.className="wrs_hiddenButDisplayed";var vj5=0;com.wiris.system.JsDOMUtils.addEventListener(iframe,"load",function(e){if(vj5==0){var form=iframe.contentWindow.document.createElement("form");form.action=url;form.method="POST";iframe.contentWindow.document.body.appendChild(form);var i=parameters.keys();while(i.hasNext()){var vF=i.next();var input=iframe.contentWindow.document.createElement("input");input.type="hidden";input.name=vF;input.value=parameters.get(vF);form.appendChild(input);};form.submit();}else if(vj5==1){iframe.parentNode.removeChild(iframe);var vk5=new HaxeHash();vk5.set("sessionVarName",sessionVarName);if(va5)com.wiris.system.ServiceProvider.vh1("computedAnswer",vk5,listener);else com.wiris.system.ServiceProvider.vZ5(com.wiris.system.ServiceProvider.vf5("computedAnswer"),vk5,listener);};++vj5;});}else{var vl5=new HaxeHash();vl5.set("id",com.wiris.system.ServiceProvider.vh5);if(va5)vl5.set("serviceName",target);else vl5.set("url",target);vl5.set("parameters",parameters);vl5.set("listener",listener);vl5.set("created",new Date().getTime());com.wiris.system.ServiceProvider.vm5.push(vl5);if(com.wiris.system.ServiceProvider.vZ2==null){com.wiris.system.ServiceProvider.vZ2=new haxe.Timer(100);com.wiris.system.ServiceProvider.vZ2.run=com.wiris.system.ServiceProvider.tick;};var script=js.Lib.document.createElement("script");script.setAttribute("src",url+vg5);js.Lib.document.body.appendChild(script);++com.wiris.system.ServiceProvider.vh5;}};com.wiris.system.ServiceProvider.ve5=function(target,va5,parameters,vT5,listener){var url=va5||!(StringTools.startsWith(target,"http://")||StringTools.startsWith(target,"https://"))?com.wiris.system.ServiceProvider.vf5(target):target;var vg5=(url.indexOf("?")==-1?"?":"&")+"httpstatus=true";var vn5=com.wiris.system.ServiceProvider.vo5();vn5.onreadystatechange=function(){if(vn5.readyState!=4)return;if(va5)listener.serviceAnswerReceived(target,parameters,vn5.status,vn5.responseText);else listener.urlAnswerReceived(target,parameters,vn5.status,vn5.responseText);};var postData=null;var method="POST";vn5.open(method,url+vg5,true);vn5.vp5=com.wiris.system.ServiceProvider.vq5;vn5.setRequestHeader("Content-Type","application/x-www-form-urlencoded;charset=UTF-8");if(parameters==null)parameters=new HaxeHash();com.wiris.system.ServiceProvider.vr5(parameters,vT5);var i=parameters.keys();var vs5=new Array();while(i.hasNext()){var vF=i.next();vs5.push(StringTools.urlEncode(vF)+"="+StringTools.urlEncode(parameters.get(vF)));};postData=vs5.join("&");vn5.send(postData);};com.wiris.system.ServiceProvider.vr5=function(parameters,vT5){parameters.set("wrs-license",com.wiris.system.ServiceProvider.vt5);parameters.set("wrs-deployment",com.wiris.system.ServiceProvider.vu5);if(vT5!=null)parameters.set("wrs-cause",vT5);};com.wiris.system.ServiceProvider.vo5=function(){var i=HxOverrides.iter(com.wiris.system.ServiceProvider.vv5);while(i.hasNext()){var vw5=i.next();try{return vw5();}catch(e){}};throw"Unable to create XMLHttpRequest object.";};com.wiris.system.ServiceProvider.vf5=function(serviceName){var basePath="http://localhost:8080/formula-swf";if(com.wiris.system.ServiceProvider.vn1!=null)basePath=com.wiris.system.ServiceProvider.vn1;else if(window.com.wiris.js.defaultServicePath)basePath=window.com.wiris.js.defaultServicePath;else if(window.com.wiris.js.defaultBasePath){basePath=window.com.wiris.js.defaultBasePath;var vx5=basePath.split("/");vx5.pop();basePath=vx5.join("/");};return basePath+"/"+serviceName;};com.wiris.system.ServiceProvider.tick=function(){var i=0;while(i<com.wiris.system.ServiceProvider.vm5.length){var vy5=com.wiris.system.ServiceProvider.vm5[i].get("id");if(("answer_"+vy5)in com.wiris.system.ServiceProvider){var target=com.wiris.system.ServiceProvider.vm5[i].get("serviceName");var parameters=com.wiris.system.ServiceProvider.vm5[i].get("parameters");var listener=com.wiris.system.ServiceProvider.vm5[i].get("listener");var status=200;var vd1=com.wiris.system.ServiceProvider["answer_"+vy5];if(("answer_"+vy5+"_full")in com.wiris.system.ServiceProvider)status=com.wiris.system.ServiceProvider["answer_"+vy5+"_full"].status;if(target==null){target=com.wiris.system.ServiceProvider.vm5[i].get("url");com.wiris.system.ServiceProvider.vm5.splice(i,1);listener.urlAnswerReceived(target,parameters,status,vd1);}else{com.wiris.system.ServiceProvider.vm5.splice(i,1);listener.serviceAnswerReceived(target,parameters,status,vd1);}}else if(com.wiris.system.ServiceProvider.vm5[i].get("created")+com.wiris.system.ServiceProvider.TIMEOUT<new Date().getTime()){com.wiris.system.ServiceProvider["answer_"+vy5+"_full"]={status:0,data:"Error: timeout waiting for response."};com.wiris.system.ServiceProvider["answer_"+vy5]=com.wiris.system.ServiceProvider["answer_"+vy5+"_full"].data;}else++i;};if(com.wiris.system.ServiceProvider.vm5.length==0){com.wiris.system.ServiceProvider.vZ2.stop();com.wiris.system.ServiceProvider.vZ2=null;}};com.wiris.system.ServiceProvider.addObject=function(d){};com.wiris.system.ServiceProvider.i=function(str){return eval(str);};com.wiris.system.ServiceProvider.vz5=function(){return com.wiris.system.ServiceProvider.vq5;};com.wiris.system.ServiceProvider.vz=function(vb5){com.wiris.system.ServiceProvider.vb5=vb5;};com.wiris.system.ServiceProvider.v31=function(vn1){com.wiris.system.ServiceProvider.vn1=vn1;};com.wiris.system.ServiceProvider.vc1=function(v06){com.wiris.system.ServiceProvider.vq5=v06;};com.wiris.system.ServiceProvider.v16=function(license){com.wiris.system.ServiceProvider.vt5=license;};com.wiris.system.ServiceProvider.v11=function(v26){com.wiris.system.ServiceProvider.vu5=v26;};var haxe=haxe||{};haxe.Json=v6["haxe.Json"]=function(){};haxe.Json.__name__=["haxe","Json"];haxe.Json.parse=function(text){return new haxe.Json().v36(text);};haxe.Json.stringify=function(value){return new haxe.Json().toString(value);};haxe.Json.prototype={v46:function(){var start=this.pos;var buf=new StringBuf();while(true){var c=this.str.charCodeAt(this.pos++);if(c==34)break;if(c==92){buf.b+=HxOverrides.substr(this.str,start,this.pos-start-1);c=this.str.charCodeAt(this.pos++);switch(c){case 114:buf.b+=String.fromCharCode(13);break;case 110:buf.b+=String.fromCharCode(10);break;case 116:buf.b+=String.fromCharCode(9);break;case 98:buf.b+=String.fromCharCode(8);break;case 102:buf.b+=String.fromCharCode(12);break;case 47:case 92:case 34:buf.b+=String.fromCharCode(c);break;case 117:var v56=Std.parseInt("0x"+HxOverrides.substr(this.str,this.pos,4));this.pos+=4;buf.b+=String.fromCharCode(v56);break;default:throw"Invalid escape sequence \\"+String.fromCharCode(c)+" at position "+(this.pos-1);};start=this.pos;}else if(c!=c)throw"Unclosed string";};buf.b+=HxOverrides.substr(this.str,start,this.pos-start-1);return buf.b;},v66:function(){while(true){var c=this.str.charCodeAt(this.pos++);switch(c){case 32:case 13:case 10:case 9:break;case 123:var obj={},field=null,v76=null;while(true){var v86=this.str.charCodeAt(this.pos++);switch(v86){case 32:case 13:case 10:case 9:break;case 125:if(field!=null||v76==false)this.v96();return obj;case 58:if(field==null)this.v96();obj[field]=this.v66();field=null;v76=true;break;case 44:if(v76)v76=false;else this.v96();break;case 34:if(v76)this.v96();field=this.v46();break;default:this.v96();}};break;case 91:var arr=[],v76=null;while(true){var v86=this.str.charCodeAt(this.pos++);switch(v86){case 32:case 13:case 10:case 9:break;case 93:if(v76==false)this.v96();return arr;case 44:if(v76)v76=false;else this.v96();break;default:if(v76)this.v96();this.pos--;arr.push(this.v66());v76=true;}};break;case 116:var save=this.pos;if(this.str.charCodeAt(this.pos++)!=114||this.str.charCodeAt(this.pos++)!=117||this.str.charCodeAt(this.pos++)!=101){this.pos=save;this.v96();};return true;case 102:var save=this.pos;if(this.str.charCodeAt(this.pos++)!=97||this.str.charCodeAt(this.pos++)!=108||this.str.charCodeAt(this.pos++)!=115||this.str.charCodeAt(this.pos++)!=101){this.pos=save;this.v96();};return false;case 110:var save=this.pos;if(this.str.charCodeAt(this.pos++)!=117||this.str.charCodeAt(this.pos++)!=108||this.str.charCodeAt(this.pos++)!=108){this.pos=save;this.v96();};return null;case 34:return this.v46();case 48:case 49:case 50:case 51:case 52:case 53:case 54:case 55:case 56:case 57:case 45:this.pos--;if(!this.vA6.match(HxOverrides.substr(this.str,this.pos,null)))throw"Invalid float at position "+this.pos;var v=this.vA6.matched(0);this.pos+=v.length;var f=Std.parseFloat(v);var i=f|0;return i==f?i:f;default:this.v96();}}},vB6:function(){return this.str.charCodeAt(this.pos++);},v96:function(){this.pos--;throw"Invalid char "+this.str.charCodeAt(this.pos)+" at position "+this.pos;},v36:function(str){this.vA6=new EReg("^-?(0|[1-9][0-9]*)(\\.[0-9]+)?([eE][+-]?[0-9]+)?","");this.str=str;this.pos=0;return this.v66();},quote:function(s){this.buf.b+=Std.string("\"");var i=0;while(true){var c=s.charCodeAt(i++);if(c!=c)break;switch(c){case 34:this.buf.b+=Std.string("\\\"");break;case 92:this.buf.b+=Std.string("\\\\");break;case 10:this.buf.b+=Std.string("\\n");break;case 13:this.buf.b+=Std.string("\\r");break;case 9:this.buf.b+=Std.string("\\t");break;case 8:this.buf.b+=Std.string("\\b");break;case 12:this.buf.b+=Std.string("\\f");break;default:this.buf.b+=String.fromCharCode(c);}};this.buf.b+=Std.string("\"");},vC6:function(v){var vD6=(Type["typeof"](v));switch(vD6[1]){case 8:this.buf.b+=Std.string("\"???\"");break;case 4:this.vE6(v);break;case 1:case 2:this.buf.b+=Std.string(v);break;case 5:this.buf.b+=Std.string("\"<fun>\"");break;case 6:var c=vD6[2];if(c==String)this.quote(v);else if(c==Array){var vF6=v;this.buf.b+=Std.string("[");var len=vF6.length;if(len>0){this.vC6(vF6[0]);var i=1;while(i<len){this.buf.b+=Std.string(",");this.vC6(vF6[i++]);}};this.buf.b+=Std.string("]");}else if(c==HaxeHash){var vF6=v;var o={};var vs=vF6.keys();while(vs.hasNext()){var vJ=vs.next();o[vJ]=vF6.get(vJ);};this.vE6(o);}else this.vE6(v);break;case 7:var e=vD6[2];this.buf.b+=Std.string(v[1]);break;case 3:this.buf.b+=Std.string(v?"true":"false");break;case 0:this.buf.b+=Std.string("null");break;}},vE6:function(v){this.vG6(v,Reflect.fields(v));},vG6:function(v,fields){var first=true;this.buf.b+=Std.string("{");var vc=0;while(vc<fields.length){var f=fields[vc];++vc;var value=Reflect.field(v,f);if(Reflect.isFunction(value))continue;if(first)first=false;else this.buf.b+=Std.string(",");this.quote(f);this.buf.b+=Std.string(":");this.vC6(value);};this.buf.b+=Std.string("}");},toString:function(v){this.buf=new StringBuf();this.vC6(v);return this.buf.b;},vA6:null,pos:null,str:null,buf:null,__class__:haxe.Json};haxe.Log=v6["haxe.Log"]=function(){};haxe.Log.__name__=["haxe","Log"];haxe.Log.trace=function(v,infos){js.Boot.__trace(v,infos);};haxe.Log.clear=function(){js.Boot.__clear_trace();};haxe.Md5=v6["haxe.Md5"]=function(){};haxe.Md5.__name__=["haxe","Md5"];haxe.Md5.encode=function(s){return new haxe.Md5().doEncode(s);};haxe.Md5.prototype={doEncode:function(str){var x=this.str2blks(str);var a=1732584193;var b=-271733879;var c=-1732584194;var d=271733878;var vH6;var i=0;while(i<x.length){var vI6=a;var vJ6=b;var vK6=c;var vL6=d;vH6=0;a=this.ff(a,b,c,d,x[i],7,-680876936);d=this.ff(d,a,b,c,x[i+1],12,-389564586);c=this.ff(c,d,a,b,x[i+2],17,606105819);b=this.ff(b,c,d,a,x[i+3],22,-1044525330);a=this.ff(a,b,c,d,x[i+4],7,-176418897);d=this.ff(d,a,b,c,x[i+5],12,1200080426);c=this.ff(c,d,a,b,x[i+6],17,-1473231341);b=this.ff(b,c,d,a,x[i+7],22,-45705983);a=this.ff(a,b,c,d,x[i+8],7,1770035416);d=this.ff(d,a,b,c,x[i+9],12,-1958414417);c=this.ff(c,d,a,b,x[i+10],17,-42063);b=this.ff(b,c,d,a,x[i+11],22,-1990404162);a=this.ff(a,b,c,d,x[i+12],7,1804603682);d=this.ff(d,a,b,c,x[i+13],12,-40341101);c=this.ff(c,d,a,b,x[i+14],17,-1502002290);b=this.ff(b,c,d,a,x[i+15],22,1236535329);a=this.gg(a,b,c,d,x[i+1],5,-165796510);d=this.gg(d,a,b,c,x[i+6],9,-1069501632);c=this.gg(c,d,a,b,x[i+11],14,643717713);b=this.gg(b,c,d,a,x[i],20,-373897302);a=this.gg(a,b,c,d,x[i+5],5,-701558691);d=this.gg(d,a,b,c,x[i+10],9,38016083);c=this.gg(c,d,a,b,x[i+15],14,-660478335);b=this.gg(b,c,d,a,x[i+4],20,-405537848);a=this.gg(a,b,c,d,x[i+9],5,568446438);d=this.gg(d,a,b,c,x[i+14],9,-1019803690);c=this.gg(c,d,a,b,x[i+3],14,-187363961);b=this.gg(b,c,d,a,x[i+8],20,1163531501);a=this.gg(a,b,c,d,x[i+13],5,-1444681467);d=this.gg(d,a,b,c,x[i+2],9,-51403784);c=this.gg(c,d,a,b,x[i+7],14,1735328473);b=this.gg(b,c,d,a,x[i+12],20,-1926607734);a=this.hh(a,b,c,d,x[i+5],4,-378558);d=this.hh(d,a,b,c,x[i+8],11,-2022574463);c=this.hh(c,d,a,b,x[i+11],16,1839030562);b=this.hh(b,c,d,a,x[i+14],23,-35309556);a=this.hh(a,b,c,d,x[i+1],4,-1530992060);d=this.hh(d,a,b,c,x[i+4],11,1272893353);c=this.hh(c,d,a,b,x[i+7],16,-155497632);b=this.hh(b,c,d,a,x[i+10],23,-1094730640);a=this.hh(a,b,c,d,x[i+13],4,681279174);d=this.hh(d,a,b,c,x[i],11,-358537222);c=this.hh(c,d,a,b,x[i+3],16,-722521979);b=this.hh(b,c,d,a,x[i+6],23,76029189);a=this.hh(a,b,c,d,x[i+9],4,-640364487);d=this.hh(d,a,b,c,x[i+12],11,-421815835);c=this.hh(c,d,a,b,x[i+15],16,530742520);b=this.hh(b,c,d,a,x[i+2],23,-995338651);a=this.ii(a,b,c,d,x[i],6,-198630844);d=this.ii(d,a,b,c,x[i+7],10,1126891415);c=this.ii(c,d,a,b,x[i+14],15,-1416354905);b=this.ii(b,c,d,a,x[i+5],21,-57434055);a=this.ii(a,b,c,d,x[i+12],6,1700485571);d=this.ii(d,a,b,c,x[i+3],10,-1894986606);c=this.ii(c,d,a,b,x[i+10],15,-1051523);b=this.ii(b,c,d,a,x[i+1],21,-2054922799);a=this.ii(a,b,c,d,x[i+8],6,1873313359);d=this.ii(d,a,b,c,x[i+15],10,-30611744);c=this.ii(c,d,a,b,x[i+6],15,-1560198380);b=this.ii(b,c,d,a,x[i+13],21,1309151649);a=this.ii(a,b,c,d,x[i+4],6,-145523070);d=this.ii(d,a,b,c,x[i+11],10,-1120210379);c=this.ii(c,d,a,b,x[i+2],15,718787259);b=this.ii(b,c,d,a,x[i+9],21,-343485551);a=this.addme(a,vI6);b=this.addme(b,vJ6);c=this.addme(c,vK6);d=this.addme(d,vL6);i+=16;};return this.rhex(a)+this.rhex(b)+this.rhex(c)+this.rhex(d);},ii:function(a,b,c,d,x,s,t){return this.cmn(this.bitXOR(c,this.bitOR(b,~d)),a,b,x,s,t);},hh:function(a,b,c,d,x,s,t){return this.cmn(this.bitXOR(this.bitXOR(b,c),d),a,b,x,s,t);},gg:function(a,b,c,d,x,s,t){return this.cmn(this.bitOR(this.bitAND(b,d),this.bitAND(c,~d)),a,b,x,s,t);},ff:function(a,b,c,d,x,s,t){return this.cmn(this.bitOR(this.bitAND(b,c),this.bitAND(~b,d)),a,b,x,s,t);},cmn:function(q,a,b,x,s,t){return this.addme(this.rol(this.addme(this.addme(a,q),this.addme(x,t)),s),b);},rol:function(vM6,vN6){return vM6<<vN6|vM6>>>32-vN6;},str2blks:function(str){var vO6=(str.length+8>>6)+1;var vP6=new Array();var vd=0,vc=vO6*16;while(vd<vc){var i=vd++;vP6[i]=0;};var i=0;while(i<str.length){vP6[i>>2]|=HxOverrides.cca(str,i)<<(str.length*8+i)%4*8;i++;};vP6[i>>2]|=128<<(str.length*8+i)%4*8;var l=str.length*8;var vJ=vO6*16-2;vP6[vJ]=l&255;vP6[vJ]|=(l>>>8&255)<<8;vP6[vJ]|=(l>>>16&255)<<16;vP6[vJ]|=(l>>>24&255)<<24;return vP6;},rhex:function(vM6){var str="";var hex_chr="0123456789abcdef";var vc=0;while(vc<4){var vm1=vc++;str+=hex_chr.charAt(vM6>>vm1*8+4&15)+hex_chr.charAt(vM6>>vm1*8&15);};return str;},addme:function(x,vO){var vQ6=(x&65535)+(vO&65535);var vR6=(x>>16)+(vO>>16)+(vQ6>>16);return vR6<<16|vQ6&65535;},bitAND:function(a,b){var vS6=a&1&(b&1);var vT6=a>>>1&b>>>1;return vT6<<1|vS6;},bitXOR:function(a,b){var vS6=a&1^b&1;var vT6=a>>>1^b>>>1;return vT6<<1|vS6;},bitOR:function(a,b){var vS6=a&1|b&1;var vT6=a>>>1|b>>>1;return vT6<<1|vS6;},__class__:haxe.Md5};haxe.Resource=v6["haxe.Resource"]=function(){};haxe.Resource.__name__=["haxe","Resource"];haxe.Resource.content=null;haxe.Resource.vU6=function(){var vV6=new Array();var vc=0,vd=haxe.Resource.content;while(vc<vd.length){var x=vd[vc];++vc;vV6.push(x.name);};return vV6;};haxe.Resource.vR5=function(name){var vc=0,vd=haxe.Resource.content;while(vc<vd.length){var x=vd[vc];++vc;if(x.name==name){if(x.str!=null)return x.str;var b=haxe.Unserializer.run(x.data);return b.toString();}};return null;};haxe.Resource.getBytes=function(name){var vc=0,vd=haxe.Resource.content;while(vc<vd.length){var x=vd[vc];++vc;if(x.name==name){if(x.str!=null)return haxe.io.Bytes.ofString(x.str);return haxe.Unserializer.run(x.data);}};return null;};haxe.Timer=v6["haxe.Timer"]=function(vW6){var vX6=this;this.id=window.setInterval(function(){vX6.run();},vW6);};haxe.Timer.__name__=["haxe","Timer"];haxe.Timer.delay=function(f,vW6){var t=new haxe.Timer(vW6);t.run=function(){t.stop();f();};return t;};haxe.Timer.vY6=function(f,pos){var vZ6=haxe.Timer.stamp();var r=f();haxe.Log.trace(haxe.Timer.stamp()-vZ6+"s",pos);return r;};haxe.Timer.stamp=function(){return new Date().getTime()/1000;};haxe.Timer.prototype={run:function(){},stop:function(){if(this.id==null)return;window.clearInterval(this.id);this.id=null;},id:null,__class__:haxe.Timer};haxe.Unserializer=v6["haxe.Unserializer"]=function(buf){this.buf=buf;this.length=buf.length;this.pos=0;this.scache=new Array();this.cache=new Array();var r=haxe.Unserializer.DEFAULT_RESOLVER;if(r==null){r=Type;haxe.Unserializer.DEFAULT_RESOLVER=r;};this.setResolver(r);};haxe.Unserializer.__name__=["haxe","Unserializer"];haxe.Unserializer.initCodes=function(){var va6=new Array();var vd=0,vc=haxe.Unserializer.BASE64.length;while(vd<vc){var i=vd++;va6[haxe.Unserializer.BASE64.charCodeAt(i)]=i;};return va6;};haxe.Unserializer.run=function(v){return new haxe.Unserializer(v).unserialize();};haxe.Unserializer.prototype={unserialize:function(){switch(this.buf.charCodeAt(this.pos++)){case 110:return null;case 116:return true;case 102:return false;case 122:return 0;case 105:return this.readDigits();case 100:var vb6=this.pos;while(true){var c=this.buf.charCodeAt(this.pos);if(c>=43&&c<58||c==101||c==69)this.pos++;else break;};return Std.parseFloat(HxOverrides.substr(this.buf,vb6,this.pos-vb6));case 121:var len=this.readDigits();if(this.buf.charCodeAt(this.pos++)!=58||this.length-this.pos<len)throw"Invalid string length";var s=HxOverrides.substr(this.buf,this.pos,len);this.pos+=len;s=StringTools.urlDecode(s);this.scache.push(s);return s;case 107:return Math.NaN;case 109:return Math.NEGATIVE_INFINITY;case 112:return Math.POSITIVE_INFINITY;case 97:var buf=this.buf;var a=new Array();this.cache.push(a);while(true){var c=this.buf.charCodeAt(this.pos);if(c==104){this.pos++;break;};if(c==117){this.pos++;var n=this.readDigits();a[a.length+n-1]=null;}else a.push(this.unserialize());};return a;case 111:var o={};this.cache.push(o);this.unserializeObject(o);return o;case 114:var n=this.readDigits();if(n<0||n>=this.cache.length)throw"Invalid reference";return this.cache[n];case 82:var n=this.readDigits();if(n<0||n>=this.scache.length)throw"Invalid string reference";return this.scache[n];case 120:throw this.unserialize();break;case 99:var name=this.unserialize();var vh=this.resolver.resolveClass(name);if(vh==null)throw"Class not found "+name;var o=Type.createEmptyInstance(vh);this.cache.push(o);this.unserializeObject(o);return o;case 119:var name=this.unserialize();var vc6=this.resolver.resolveEnum(name);if(vc6==null)throw"Enum not found "+name;var e=this.unserializeEnum(vc6,this.unserialize());this.cache.push(e);return e;case 106:var name=this.unserialize();var vc6=this.resolver.resolveEnum(name);if(vc6==null)throw"Enum not found "+name;this.pos++;var index=this.readDigits();var tag=Type.getEnumConstructs(vc6)[index];if(tag==null)throw"Unknown enum index "+name+"@"+index;var e=this.unserializeEnum(vc6,tag);this.cache.push(e);return e;case 108:var l=new List();this.cache.push(l);var buf=this.buf;while(this.buf.charCodeAt(this.pos)!=104)l.add(this.unserialize());this.pos++;return l;case 98:var h=new HaxeHash();this.cache.push(h);var buf=this.buf;while(this.buf.charCodeAt(this.pos)!=104){var s=this.unserialize();h.set(s,this.unserialize());};this.pos++;return h;case 113:var h=new IntHash();this.cache.push(h);var buf=this.buf;var c=this.buf.charCodeAt(this.pos++);while(c==58){var i=this.readDigits();h.set(i,this.unserialize());c=this.buf.charCodeAt(this.pos++);};if(c!=104)throw"Invalid IntHash format";return h;case 118:var d=HxOverrides.vI(HxOverrides.substr(this.buf,this.pos,19));this.cache.push(d);this.pos+=19;return d;case 115:var len=this.readDigits();var buf=this.buf;if(this.buf.charCodeAt(this.pos++)!=58||this.length-this.pos<len)throw"Invalid bytes length";var va6=haxe.Unserializer.CODES;if(va6==null){va6=haxe.Unserializer.initCodes();haxe.Unserializer.CODES=va6;};var i=this.pos;var vd6=len&3;var size=(len>>2)*3+(vd6>=2?vd6-1:0);var max=i+(len-vd6);var bytes=haxe.io.Bytes.alloc(size);var ve6=0;while(i<max){var v86=va6[buf.charCodeAt(i++)];var vf6=va6[buf.charCodeAt(i++)];bytes.b[ve6++]=(v86<<2|vf6>>4)&255;var vg6=va6[buf.charCodeAt(i++)];bytes.b[ve6++]=(vf6<<4|vg6>>2)&255;var vh6=va6[buf.charCodeAt(i++)];bytes.b[ve6++]=(vg6<<6|vh6)&255;};if(vd6>=2){var v86=va6[buf.charCodeAt(i++)];var vf6=va6[buf.charCodeAt(i++)];bytes.b[ve6++]=(v86<<2|vf6>>4)&255;if(vd6==3){var vg6=va6[buf.charCodeAt(i++)];bytes.b[ve6++]=(vf6<<4|vg6>>2)&255;}};this.pos+=len;this.cache.push(bytes);return bytes;case 67:var name=this.unserialize();var vh=this.resolver.resolveClass(name);if(vh==null)throw"Class not found "+name;var o=Type.createEmptyInstance(vh);this.cache.push(o);o.vi6(this);if(this.buf.charCodeAt(this.pos++)!=103)throw"Invalid custom data";return o;default:};this.pos--;throw"Invalid char "+this.buf.charAt(this.pos)+" at position "+this.pos;},unserializeEnum:function(vc6,tag){if(this.buf.charCodeAt(this.pos++)!=58)throw"Invalid enum format";var vj6=this.readDigits();if(vj6==0)return Type.createEnum(vc6,tag);var args=new Array();while(vj6-->0)args.push(this.unserialize());return Type.createEnum(vc6,tag,args);},unserializeObject:function(o){while(true){if(this.pos>=this.length)throw"Invalid object";if(this.buf.charCodeAt(this.pos)==103)break;var vJ=this.unserialize();if(!js.Boot.__instanceof(vJ,String))throw"Invalid object key";var v=this.unserialize();o[vJ]=v;};this.pos++;},readDigits:function(){var vJ=0;var s=false;var vk6=this.pos;while(true){var c=this.buf.charCodeAt(this.pos);if(c!=c)break;if(c==45){if(this.pos!=vk6)break;s=true;this.pos++;continue;};if(c<48||c>57)break;vJ=vJ*10+(c-48);this.pos++;};if(s)vJ*=-1;return vJ;},get:function(p){return this.buf.charCodeAt(p);},getResolver:function(){return this.resolver;},setResolver:function(r){if(r==null)this.resolver={resolveClass:function(_){return null;},resolveEnum:function(_){return null;}};else this.resolver=r;},resolver:null,scache:null,cache:null,length:null,pos:null,buf:null,__class__:haxe.Unserializer};haxe.Utf8=v6["haxe.Utf8"]=function(size){this.vl6="";};haxe.Utf8.__name__=["haxe","Utf8"];haxe.Utf8.iter=function(s,vm6){var vd=0,vc=s.length;while(vd<vc){var i=vd++;vm6(HxOverrides.cca(s,i));}};haxe.Utf8.encode=function(s){throw"Not implemented";return s;};haxe.Utf8.decode=function(s){throw"Not implemented";return s;};haxe.Utf8.charCodeAt=function(s,index){return HxOverrides.cca(s,index);};haxe.Utf8.validate=function(s){return true;};haxe.Utf8.compare=function(a,b){return a>b?1:a==b?0:-1;};haxe.Utf8.sub=function(s,pos,len){return HxOverrides.substr(s,pos,len);};haxe.Utf8.prototype={toString:function(){return this.vl6;},addChar:function(c){this.vl6+=String.fromCharCode(c);},vl6:null,__class__:haxe.Utf8};if(!haxe.io)haxe.io={};haxe.io.Bytes=v6["haxe.io.Bytes"]=function(length,b){this.length=length;this.b=b;};haxe.io.Bytes.__name__=["haxe","io","Bytes"];haxe.io.Bytes.alloc=function(length){var a=new Array();var vc=0;while(vc<length){var i=vc++;a.push(0);};return new haxe.io.Bytes(length,a);};haxe.io.Bytes.ofString=function(s){var a=new Array();var vd=0,vc=s.length;while(vd<vc){var i=vd++;var c=s.charCodeAt(i);if(c<=127)a.push(c);else if(c<=2047){a.push(192|c>>6);a.push(128|c&63);}else if(c<=65535){a.push(224|c>>12);a.push(128|c>>6&63);a.push(128|c&63);}else{a.push(240|c>>18);a.push(128|c>>12&63);a.push(128|c>>6&63);a.push(128|c&63);}};return new haxe.io.Bytes(a.length,a);};haxe.io.Bytes.ofData=function(b){return new haxe.io.Bytes(b.length,b);};haxe.io.Bytes.prototype={getData:function(){return this.b;},vn6:function(){var s=new StringBuf();var vm6=[];var str="0123456789abcdef";var vd=0,vc=str.length;while(vd<vc){var i=vd++;vm6.push(HxOverrides.cca(str,i));};var vd=0,vc=this.length;while(vd<vc){var i=vd++;var c=this.b[i];s.b+=String.fromCharCode(vm6[c>>4]);s.b+=String.fromCharCode(vm6[c&15]);};return s.b;},toString:function(){return this.readString(0,this.length);},readString:function(pos,len){if(pos<0||len<0||pos+len>this.length)throw haxe.io.Error.OutsideBounds;var s="";var b=this.b;var vo6=String.fromCharCode;var i=pos;var max=pos+len;while(i<max){var c=b[i++];if(c<128){if(c==0)break;s+=vo6(c);}else if(c<224)s+=vo6((c&63)<<6|b[i++]&127);else if(c<240){var vf6=b[i++];s+=vo6((c&31)<<12|(vf6&127)<<6|b[i++]&127);}else{var vf6=b[i++];var vg6=b[i++];s+=vo6((c&15)<<18|(vf6&127)<<12|vg6<<6&127|b[i++]&127);}};return s;},compare:function(vp6){var vq6=this.b;var vr6=vp6.b;var len=this.length<vp6.length?this.length:vp6.length;var vc=0;while(vc<len){var i=vc++;if(vq6[i]!=vr6[i])return vq6[i]-vr6[i];};return this.length-vp6.length;},sub:function(pos,len){if(pos<0||len<0||pos+len>this.length)throw haxe.io.Error.OutsideBounds;return new haxe.io.Bytes(len,this.b.slice(pos,pos+len));},blit:function(pos,src,vs6,len){if(pos<0||vs6<0||len<0||pos+len>this.length||vs6+len>src.length)throw haxe.io.Error.OutsideBounds;var vq6=this.b;var vr6=src.b;if(vq6==vr6&&pos>vs6){var i=len;while(i>0){i--;vq6[i+pos]=vr6[i+vs6];};return;};var vc=0;while(vc<len){var i=vc++;vq6[i+pos]=vr6[i+vs6];}},set:function(pos,v){this.b[pos]=v&255;},get:function(pos){return this.b[pos];},b:null,length:null,__class__:haxe.io.Bytes};haxe.io.Error=v6["haxe.io.Error"]={vX:["haxe","io","Error"],vn:["Blocked","Overflow","OutsideBounds","Custom"]};haxe.io.Error.Blocked=["Blocked",0];haxe.io.Error.Blocked.toString=v7;haxe.io.Error.Blocked.va=haxe.io.Error;haxe.io.Error.Overflow=["Overflow",1];haxe.io.Error.Overflow.toString=v7;haxe.io.Error.Overflow.va=haxe.io.Error;haxe.io.Error.OutsideBounds=["OutsideBounds",2];haxe.io.Error.OutsideBounds.toString=v7;haxe.io.Error.OutsideBounds.va=haxe.io.Error;haxe.io.Error.Custom=function(e){var vo=["Custom",3,e];vo.va=haxe.io.Error;vo.toString=v7;return vo;};if(!haxe.xml)haxe.xml={};haxe.xml.Parser=v6["haxe.xml.Parser"]=function(){};haxe.xml.Parser.__name__=["haxe","xml","Parser"];haxe.xml.Parser.parse=function(str){var doc=Xml.createDocument();haxe.xml.Parser.v36(str,0,doc);return doc;};haxe.xml.Parser.v36=function(str,p,parent){if(p==null)p=0;var xml=null;var vt6=1;var next=1;var vu6=null;var start=0;var vv6=0;var vw6=0;var c=str.charCodeAt(p);while(!(c!=c)){switch(vt6){case 0:switch(c){case 10:case 13:case 9:case 32:break;default:vt6=next;continue;};break;case 1:switch(c){case 60:vt6=0;next=2;break;default:start=p;vt6=13;continue;};break;case 13:if(c==60){var vC4=Xml.createPCData(HxOverrides.substr(str,start,p-start));parent.addChild(vC4);vv6++;vt6=0;next=2;};break;case 17:if(c==93&&str.charCodeAt(p+1)==93&&str.charCodeAt(p+2)==62){var vC4=Xml.createCData(HxOverrides.substr(str,start,p-start));parent.addChild(vC4);vv6++;p+=2;vt6=1;};break;case 2:switch(c){case 33:if(str.charCodeAt(p+1)==91){p+=2;if(HxOverrides.substr(str,p,6).toUpperCase()!="CDATA[")throw"Expected <![CDATA[";p+=5;vt6=17;start=p+1;}else if(str.charCodeAt(p+1)==68||str.charCodeAt(p+1)==100){if(HxOverrides.substr(str,p+2,6).toUpperCase()!="OCTYPE")throw"Expected <!DOCTYPE";p+=8;vt6=16;start=p+1;}else if(str.charCodeAt(p+1)!=45||str.charCodeAt(p+2)!=45)throw"Expected <!--";else{p+=2;vt6=15;start=p+1;};break;case 63:vt6=14;start=p;break;case 47:if(parent==null)throw"Expected node name";start=p+1;vt6=0;next=10;break;default:vt6=3;start=p;continue;};break;case 3:if(!(c>=97&&c<=122||c>=65&&c<=90||c>=48&&c<=57||c==58||c==46||c==95||c==45)){if(p==start)throw"Expected node name";xml=Xml.createElement(HxOverrides.substr(str,start,p-start));parent.addChild(xml);vt6=0;next=4;continue;};break;case 4:switch(c){case 47:vt6=11;vv6++;break;case 62:vt6=9;vv6++;break;default:vt6=5;start=p;continue;};break;case 5:if(!(c>=97&&c<=122||c>=65&&c<=90||c>=48&&c<=57||c==58||c==46||c==95||c==45)){var vU;if(start==p)throw"Expected attribute name";vU=HxOverrides.substr(str,start,p-start);vu6=vU;if(xml.exists(vu6))throw"Duplicate attribute";vt6=0;next=6;continue;};break;case 6:switch(c){case 61:vt6=0;next=7;break;default:throw"Expected =";};break;case 7:switch(c){case 34:case 39:vt6=8;start=p;break;default:throw"Expected \"";};break;case 8:if(c==str.charCodeAt(start)){var vx6=HxOverrides.substr(str,start+1,p-start-1);xml.set(vu6,vx6);vt6=0;next=4;};break;case 9:p=haxe.xml.Parser.v36(str,p,xml);start=p;vt6=1;break;case 11:switch(c){case 62:vt6=1;break;default:throw"Expected >";};break;case 12:switch(c){case 62:if(vv6==0)parent.addChild(Xml.createPCData(""));return p;default:throw"Expected >";};break;case 10:if(!(c>=97&&c<=122||c>=65&&c<=90||c>=48&&c<=57||c==58||c==46||c==95||c==45)){if(start==p)throw"Expected node name";var v=HxOverrides.substr(str,start,p-start);if(v!=parent.getNodeName())throw"Expected </"+parent.getNodeName()+">";vt6=0;next=12;continue;};break;case 15:if(c==45&&str.charCodeAt(p+1)==45&&str.charCodeAt(p+2)==62){parent.addChild(Xml.createComment(HxOverrides.substr(str,start,p-start)));p+=2;vt6=1;};break;case 16:if(c==91)vw6++;else if(c==93)vw6--;else if(c==62&&vw6==0){parent.addChild(Xml.createDocType(HxOverrides.substr(str,start,p-start)));vt6=1;};break;case 14:if(c==63&&str.charCodeAt(p+1)==62){p++;var vy6=HxOverrides.substr(str,start+1,p-start-2);parent.addChild(Xml.createProlog(vy6));vt6=1;};break;};c=str.charCodeAt(++p);};if(vt6==1){start=p;vt6=13;};if(vt6==13){if(p!=start||vv6==0)parent.addChild(Xml.createPCData(HxOverrides.substr(str,start,p-start)));return p;};throw"Unexpected end";};haxe.xml.Parser.vz6=function(c){return c>=97&&c<=122||c>=65&&c<=90||c>=48&&c<=57||c==58||c==46||c==95||c==45;};var js=js||{};js.Boot=v6["js.Boot"]=function(){};js.Boot.__name__=["js","Boot"];js.Boot.__unhtml=function(s){return s.split("&").join("&amp;").split("<").join("&lt;").split(">").join("&gt;");};js.Boot.__trace=function(v,i){var vY1=i!=null?i.fileName+":"+i.lineNumber+": ":"";vY1+=js.Boot.__string_rec(v,"");var d;if(typeof(document)!="undefined"&&(d=document.getElementById("haxe:trace"))!=null)d.innerHTML+=js.Boot.__unhtml(vY1)+"<br/>";else if(typeof(v07)!="undefined"&&v07.log!=null)v07.log(vY1);};js.Boot.__clear_trace=function(){var d=document.getElementById("haxe:trace");if(d!=null)d.innerHTML="";};js.Boot.v17=function(o){return o.__name__;};js.Boot.v27=function(e){return e.vX;};js.Boot.getClass=function(o){return o.__class__;};js.Boot.__string_rec=function(o,s){if(o==null)return"null";if(s.length>=5)return"<...>";var t=typeof(o);if(t=="function"&&(o.__name__||o.vX))t="object";switch(t){case"object":if(o instanceof Array){if(o.va){if(o.length==2)return o[0];var str=o[0]+"(";s+="\t";var vd=2,vc=o.length;while(vd<vc){var i=vd++;if(i!=2)str+=","+js.Boot.__string_rec(o[i],s);else str+=js.Boot.__string_rec(o[i],s);};return str+")";};var l=o.length;var i;var str="[";s+="\t";var vc=0;while(vc<l){var vT2=vc++;str+=(vT2>0?",":"")+js.Boot.__string_rec(o[vT2],s);};str+="]";return str;};var v37;try{v37=o.toString;}catch(e){return"???";};if(v37!=null&&v37!=Object.toString){var v47=o.toString();if(v47!="[object Object]")return v47;};var vJ=null;var str="{\n";s+="\t";var v57=o.hasOwnProperty!=null;for(var vJ in o){;if(v57&&!o.hasOwnProperty(vJ)){continue;};if(vJ=="prototype"||vJ=="__class__"||vJ=="__super__"||vJ=="__interfaces__"||vJ=="__properties__"){continue;};if(str.length!=2)str+=", \n";str+=s+vJ+" : "+js.Boot.__string_rec(o[vJ],s);};s=s.substring(1);str+="\n"+s+"}";return str;case"function":return"<function>";case"string":return o;default:return String(o);}};js.Boot.__interfLoop=function(v67,vh){if(v67==null)return false;if(v67==vh)return true;var v77=v67.__interfaces__;if(v77!=null){var vd=0,vc=v77.length;while(vd<vc){var i=vd++;var vT2=v77[i];if(vT2==vh||js.Boot.__interfLoop(vT2,vh))return true;}};return js.Boot.__interfLoop(v67.__super__,vh);};js.Boot.__instanceof=function(o,vh){try{if(o instanceof vh){if(vh==Array)return o.va==null;return true;};if(js.Boot.__interfLoop(o.__class__,vh))return true;}catch(e){if(vh==null)return false;};switch(vh){case Int:return Math.ceil(o%2147483648.0)===o;case Float:return typeof(o)=="number";case Bool:return o===true||o===false;case String:return typeof(o)=="string";case Dynamic:return true;default:if(o==null)return false;if(vh==Class&&o.__name__!=null)return true;else null;if(vh==Enum&&o.vX!=null)return true;else null;return o.va==vh;}};js.Boot.va1=function(o,t){if(js.Boot.__instanceof(o,t))return o;else throw"Cannot cast "+Std.string(o)+" to "+Std.string(t);};js.Lib=v6["js.Lib"]=function(){};js.Lib.__name__=["js","Lib"];js.Lib.document=null;js.Lib.window=null;js.Lib.debug=function(){debugger;};js.Lib.alert=function(v){alert(js.Boot.__string_rec(v,""));};js.Lib.eval=function(v87){return eval(v87);};js.Lib.setErrorHandler=function(f){js.Lib.onerror=f;};function vf3(o){if(o instanceof Array)return function(){return HxOverrides.iter(o);};return typeof(o.iterator)=='function'?vA1(o,o.iterator):o.iterator;};var v97;function vA1(o,m){var f=function(){return f.method.apply(f.scope,arguments);};f.scope=o;f.method=m;return f;};if(Array.prototype.indexOf)HxOverrides.remove=function(a,o){var i=a.indexOf(o);if(i==-1)return false;a.splice(i,1);return true;};else null;Math.__name__=["Math"];Math.NaN=Number.NaN;Math.NEGATIVE_INFINITY=Number.NEGATIVE_INFINITY;Math.POSITIVE_INFINITY=Number.POSITIVE_INFINITY;v6.Math=Math;Math.isFinite=function(i){return isFinite(i);};Math.isNaN=function(i){return isNaN(i);};String.prototype.__class__=v6.String=String;String.__name__=["String"];Array.prototype.__class__=v6.Array=Array;Array.__name__=["Array"];Date.prototype.__class__=v6.Date=Date;Date.__name__=["Date"];var Int=v6.Int={__name__:["Int"]};var Dynamic=v6.Dynamic={__name__:["Dynamic"]};var Float=v6.Float=Number;Float.__name__=["Float"];var Bool=v6.Bool=Boolean;Bool.vX=["Bool"];var Class=v6.Class={__name__:["Class"]};var Enum={};var Void=v6.Void={vX:["Void"]};Xml.Element="element";Xml.PCData="pcdata";Xml.CData="cdata";Xml.Comment="comment";Xml.DocType="doctype";Xml.Prolog="prolog";Xml.Document="document";if(typeof(JSON)!="undefined")haxe.Json=JSON;haxe.Resource.content=[{name:"version.txt",data:"s16:Ny43LjAuOWE0MWJj"}];if(typeof document!="undefined")js.Lib.document=document;if(typeof window!="undefined"){js.Lib.window=window;js.Lib.window.onerror=function(vY1,url,line){var f=js.Lib.onerror;if(f==null)return false;return f(vY1,[url+":"+line]);};};js.XMLHttpRequest=window.XMLHttpRequest?XMLHttpRequest:window.ActiveXObject?function(){try{return new ActiveXObject("Msxml2.XMLHTTP");}catch(e){try{return new ActiveXObject("Microsoft.XMLHTTP");}catch(vA7){throw"Unable to create XMLHttpRequest object.";}}}:(function(vA){var vB;throw"Unable to create XMLHttpRequest object.";return vB;}(this));com.wiris.js.JsHand.DEFAULT_PREVIEW_ZOOM=1.5;com.wiris.js.JsHand.DEFAULT_LINE_COLOR="#284283";com.wiris.js.JsHand.DEFAULT_LINE_WIDTH=3;com.wiris.js.JsHand.DEFAULT_RECOGNITION_DELAY=500;com.wiris.js.JsHand.DEFAULT_RELATIVE_FIT_MARGIN=0.05;com.wiris.js.JsHand.DEFAULT_FIT_WIDTH_PER_CHARACTER_PROPORTION=0.038929;com.wiris.js.JsHand.DEFAULT_EDITOR_SERVICE_URL="https://www.wiris.net/demo/editor";com.wiris.js.JsHand.DEFAULT_LATEX2MATHML_SERVICE_URL="https://www.wiris.net/demo/editor/latex2mathml";com.wiris.js.JsHand.DEFAULT_DELETION_GESTURE_INTERSECTIONS=5;com.wiris.js.JsHand.DEFAULT_DELETION_RECTANGLE_WIDTH=15;com.wiris.js.JsHand.DEFAULT_DELETION_DIAGONAL_OFFSET=0.15;com.wiris.js.JsHand.DEFAULT_DELETION_SAFE_MARGIN=10.0;com.wiris.js.JsHand.DEFAULT_DELETION_LINE_COLOR="#ed1a26";com.wiris.js.JsHand.DEFAULT_DELETION_DELETED_STROKE_COLOR="#ed1a26";com.wiris.js.JsHand.DEFAULT_EDITION_MARKER_SIZE=6;com.wiris.js.JsHand.DEFAULT_EDITION_MARKER_LINE_COLOR="#000000";com.wiris.js.JsHand.DEFAULT_EDITION_MARKER_BACKGROUND_COLOR="#ffff00";com.wiris.js.JsHand.DEFAULT_EDITION_SELECTED_MARKER_BACKGROUND_COLOR="#ff0000";com.wiris.js.JsHand.DEFAULT_WARNING_COLOR=null;com.wiris.js.JsHand.DEFAULT_ERROR_COLOR="b22222";com.wiris.js.JsHand.HELP_STROKES_MATH="[[[4,30],[16,62]],[[4,62],[17,30]],[[26,14],[27,10],[29,9],[32,9],[34,13],[32,19],[29,28],[26,35],[26,35],[33,35]],[[45,41],[58,41]],[[45,51],[59,51]],[[82,62],[82,9],[82,9],[71,46],[71,46],[86,46]],[[94,30],[94,56],[96,61],[103,62],[108,59],[108,54],[109,30],[109,30],[109,80],[106,88],[97,89],[94,83]],[[118,13],[119,9],[121,8],[124,8],[126,12],[124,18],[121,27],[118,34],[118,34],[125,34]],[[35,6],[34,7],[32,10],[29,14],[27,16],[27,17],[29,15],[31,13],[35,9],[36,6],[36,5],[36,8],[33,13],[29,19],[29,20],[29,21],[29,20],[31,17],[35,12],[37,8],[37,7],[36,8],[33,10],[26,18],[20,24],[20,25],[21,25],[22,25],[26,21],[31,17],[34,15],[34,13],[31,15],[26,19],[24,22],[24,24],[25,24],[30,22],[36,17]],[[126,11],[124,11],[121,12],[113,17],[113,18],[116,17],[120,14],[125,12],[126,10],[125,11],[123,13],[118,15],[115,17],[115,18],[117,18],[119,17],[122,16],[128,13],[130,11],[123,15],[119,18],[117,20],[117,21],[120,21],[125,19],[130,14],[132,11],[133,11],[131,13],[129,14],[127,16],[126,17],[126,18],[129,17],[134,15],[135,15]],[[78,13],[78,15],[75,21],[72,28],[67,38],[67,45],[67,49],[68,49],[74,41],[78,31],[80,19],[80,10],[80,9],[80,14],[77,24],[73,35],[73,45],[73,49],[74,46],[78,40],[82,29],[85,22],[85,18],[85,17],[85,18],[83,25],[77,35],[76,40],[76,41],[78,38],[82,31],[86,20],[87,14],[87,11],[87,12],[83,23],[77,39]]]";com.wiris.js.JsHand.HELP_STROKES_TEXT="[[[8,9],[8,62]],[[4,62],[13,62]],[[4,8],[12,8]],[[54,30],[57,62],[57,62],[64,34],[64,35],[71,62],[71,62],[74,29]],[[82,29],[82,62],[82,61],[82,34],[82,34],[89,30],[95,30],[97,33]],[[109,61],[105,57],[105,42],[107,32],[112,29],[118,32],[120,42],[120,55],[116,62],[108,61]],[[143,55],[142,59],[139,62],[134,62],[130,60],[129,55],[128,8]],[[129,30],[138,30]],[[152,48],[158,48],[165,43],[165,34],[161,30],[155,30],[152,36],[151,45],[153,59],[159,63],[163,61],[165,56]],[[136,16.5],[135,16.5],[132,17.5],[129,19.5],[123,25.5],[111,34.5],[101,46.5],[97,49.5],[97,50.5],[102,48.5],[108,45.5],[132,35.5],[159,23.5],[169,18.5],[169,17.5],[166,17.5],[162,19.5],[156,22.5],[147,28.5],[135,36.5],[126,42.5],[122,46.5],[119,47.5],[122,47.5],[126,46.5],[145,38.5],[155,34.5],[168,28.5],[168,27.5],[165,27.5],[154,32.5],[142,37.5],[125,44.5],[114,50.5],[109,54.5],[110,54.5],[113,54.5],[125,53.5],[141,46.5],[168,35.5],[173,32.5],[172,32.5],[167,32.5],[154,38.5],[143,43.5],[132,50.5],[123,55.5],[122,56.5],[130,55.5],[155,46.5],[163,41.5],[160,41.5],[150,44.5],[141,49.5],[133,53.5],[128,56.5],[131,56.5],[135,56.5],[138,56.5],[156,51.5],[160,51.5],[159,51.5],[156,52.5],[149,56.5],[141,61.5],[139,63.5],[140,63.5],[145,63.5],[159,60.5],[169,55.5],[171,54.5],[166,56.5]],[[106,29],[105,59],[109,62]],[[107,20],[105,22]],[[132,55],[131,59],[128,62],[123,62],[119,60],[118,55],[117,8]],[[118,30],[127,30]],[[141,48],[147,48],[154,43],[154,34],[150,30],[144,30],[141,36],[140,45],[142,59],[148,63],[152,61],[154,56]]]";com.wiris.js.JsHand.HELP_POINTS_DELAY=10;com.wiris.js.JsHand.HELP_STROKES_DELAY=100;com.wiris.js.JsHand.DEBUG=false;com.wiris.js.JsHand.instances=new Array();com.wiris.system.JsDOMUtils.va3=10;com.wiris.system.JsDOMUtils.vm2=new com.wiris.e1_4();com.wiris.system.JsDOMUtils.vG3=false;com.wiris.system.JsDOMUtils.vM3=new Array();com.wiris.system.JsDOMUtils.vO3=new Array();com.wiris.system.JsDOMUtils.vH3=new HaxeHash();com.wiris.system.ResourceLoader.editorDefinition=null;com.wiris.system.ResourceLoader.imageDefinition=null;com.wiris.system.ResourceLoader.imageDefinition1_5=null;com.wiris.system.ResourceLoader.imageDefinition2=null;com.wiris.system.ResourceLoader.charactersDefinition=null;com.wiris.system.ResourceLoader.translations={};com.wiris.system.ResourceLoader.version=null;com.wiris.system.ResourceLoader.fontAdjust=null;com.wiris.system.ResourceLoader.initialLanguage=null;com.wiris.system.ServiceProvider.vi5=2000;com.wiris.system.ServiceProvider.TIMEOUT=30000;com.wiris.system.ServiceProvider.vc5=0;com.wiris.system.ServiceProvider.v01=1;com.wiris.system.ServiceProvider.vh5=0;com.wiris.system.ServiceProvider.vm5=new Array();com.wiris.system.ServiceProvider.vb5=com.wiris.system.ServiceProvider.vc5;com.wiris.system.ServiceProvider.vn1=null;com.wiris.system.ServiceProvider.vq5=false;com.wiris.system.ServiceProvider.vt5=null;com.wiris.system.ServiceProvider.vu5=null;com.wiris.system.ServiceProvider.vv5=[function(){return new XMLHttpRequest();},function(){return new ActiveXObject("Msxml2.XMLHTTP");},function(){return new ActiveXObject("Msxml3.XMLHTTP");},function(){return new ActiveXObject("Microsoft.XMLHTTP");}];haxe.Unserializer.DEFAULT_RESOLVER=Type;haxe.Unserializer.BASE64="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789%:";haxe.Unserializer.CODES=null;js.Lib.onerror=null;com.wiris.js.JsHand.bypassEncapsulation();})();delete Array.prototype.__class__;